{"version":3,"sources":["jRating.jquery.js","List.js","Mapster.js","map-options.js","search_script_landing.js","tile_view_capture.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC70DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"common_search_script_landing.js","sourcesContent":["/************************************************************************\n*************************************************************************\n@Name :       \tjRating - jQuery Plugin\n@Revison :    \t3.1\n@Date : \t\t13/08/2013\n@Author:     \t ALPIXEL - (www.myjqueryplugins.com - www.alpixel.fr)\n@License :\t\t Open Source - MIT License : http://www.opensource.org/licenses/mit-license.php\n\n**************************************************************************\n*************************************************************************/\n(function($) {\n\t$.fn.jRating = function(op) {\n\t\tvar defaults = {\n\t\t\t/** String vars **/\n\t\t\tbigStarsPath : base_url+'/js/icons/stars-1.png', // path of the icon stars.png\n\t\t\tsmallStarsPath : base_url+'/js/icons/small-new.png', // path of the icon small.png\n\t\t\tphpPath : 'php/jRating.php', // path of the php file jRating.php\n\t\t\ttype : 'big', // can be set to 'small' or 'big'\n\n\t\t\t/** Boolean vars **/\n\t\t\tstep:false, // if true,  mouseover binded star by star,\n\t\t\tisDisabled:false, // if true, user could not rate\n\t\t\tshowRateInfo: true, // show rates informations when cursor moves onto the plugin\n\t\t\tcanRateAgain : false, // if true, the user could rates {nbRates} times with jRating.. Default, 1 time\n\t\t\tsendRequest: true, // send values to server\n\n\t\t\t/** Integer vars **/\n\t\t\tlength:5, // number of star to display\n\t\t\tdecimalLength : 0, // number of decimals.\n\t\t\trateMax : 5, // maximal rate - integer from 0 to 9999 (or more)\n\t\t\trateInfosX : -45, // relative position in X axis of the info box when mouseover\n\t\t\trateInfosY : 5, // relative position in Y axis of the info box when mouseover\n\t\t\tnbRates : 1,\n\n\t\t\t/** Functions **/\n\t\t\tonSuccess : null, // Fires when the server response is ok\n\t\t\tonError : null, // Fires when the server response is not ok\n\t\t\tonClick: null // Fires when clicking on a star\n\t\t};\n\n\t\tif(this.length>0)\n\t\treturn this.each(function() {\n\t\t\t/*vars*/\n\t\t\tvar opts = $.extend(defaults, op),\n\t\t\tnewWidth = 0,\n\t\t\tstarWidth = 0,\n\t\t\tstarHeight = 0,\n\t\t\tbgPath = '',\n\t\t\thasRated = false,\n\t\t\tglobalWidth = 0,\n\t\t\tnbOfRates = opts.nbRates;\n\n\t\t\tif($(this).hasClass('jDisabled') || opts.isDisabled)\n\t\t\t\tvar jDisabled = true;\n\t\t\telse\n\t\t\t\tvar jDisabled = false;\n\n\t\t\tgetStarWidth();\n\t\t\t$(this).height(starHeight);\n\n\t\t\tvar average = parseFloat($(this).attr('data-average')), // get the average of all rates\n\t\t\tidBox = parseInt($(this).attr('data-id')), // get the id of the box\n\t\t\twidthRatingContainer = starWidth*opts.length, // Width of the Container\n\t\t\twidthColor = average/opts.rateMax*widthRatingContainer, // Width of the color Container\n\n\t\t\tquotient =\n\t\t\t$('<div>',\n\t\t\t{\n\t\t\t\t'class' : 'jRatingColor',\n\t\t\t\tcss:{\n\t\t\t\t\twidth:widthColor\n\t\t\t\t}\n\t\t\t}).appendTo($(this)),\n\n\t\t\taverage =\n\t\t\t$('<div>',\n\t\t\t{\n\t\t\t\t'class' : 'jRatingAverage',\n\t\t\t\tcss:{\n\t\t\t\t\twidth:0,\n\t\t\t\t\ttop:- starHeight\n\t\t\t\t}\n\t\t\t}).appendTo($(this)),\n\n\t\t\t jstar =\n\t\t\t$('<div>',\n\t\t\t{\n\t\t\t\t'class' : 'jStar',\n\t\t\t\tcss:{\n\t\t\t\t\twidth:widthRatingContainer,\n\t\t\t\t\theight:starHeight,\n\t\t\t\t\ttop:- (starHeight*2),\n\t\t\t\t\tbackground: 'url('+bgPath+') repeat-x'\n\t\t\t\t}\n\t\t\t}).appendTo($(this));\n\n\n\t\t\t$(this).css({width: widthRatingContainer,overflow:'hidden',zIndex:1,position:'relative'});\n\n\t\t\tif(!jDisabled)\n\t\t\t$(this).unbind().bind({\n\t\t\t\tmouseenter : function(e){\n\t\t\t\t\tvar realOffsetLeft = findRealLeft(this);\n\t\t\t\t\tvar relativeX = e.pageX - realOffsetLeft;\n\t\t\t\t\tif (opts.showRateInfo)\n\t\t\t\t\tvar tooltip =\n\t\t\t\t\t$('<p>',{\n\t\t\t\t\t\t'class' : 'jRatingInfos',\n\t\t\t\t\t\thtml : getNote(relativeX)+' <span class=\"maxRate\">/ '+opts.rateMax+'</span>',\n\t\t\t\t\t\tcss : {\n\t\t\t\t\t\t\ttop: (e.pageY + opts.rateInfosY),\n\t\t\t\t\t\t\tleft: (e.pageX + opts.rateInfosX)\n\t\t\t\t\t\t}\n\t\t\t\t\t}).appendTo('body').hide();\n\t\t\t\t},\n\t\t\t\tmouseover : function(e){\n\t\t\t\t\t$(this).css('cursor','pointer');\n\t\t\t\t},\n\t\t\t\tmouseout : function(){\n\t\t\t\t\t$(this).css('cursor','default');\n\t\t\t\t\tif(hasRated) average.width(globalWidth);\n\t\t\t\t\telse average.width(0);\n\t\t\t\t},\n\t\t\t\tmousemove : function(e){\n\t\t\t\t\tvar realOffsetLeft = findRealLeft(this);\n\t\t\t\t\tvar relativeX = e.pageX - realOffsetLeft;\n\t\t\t\t\tif(opts.step) newWidth = Math.floor(relativeX/starWidth)*starWidth + starWidth;\n\t\t\t\t\telse newWidth = relativeX;\n\t\t\t\t\taverage.width(newWidth);\n\t\t\t\t\tif (opts.showRateInfo)\n\t\t\t\t\t$(\"p.jRatingInfos\")\n\t\t\t\t\t.css({\n\t\t\t\t\t\tleft: (e.pageX + opts.rateInfosX)\n\t\t\t\t\t})\n\t\t\t\t\t.html(getNote(newWidth) +' <span class=\"maxRate\">/ '+opts.rateMax+'</span>');\n\t\t\t\t},\n\t\t\t\tmouseleave : function(){\n\t\t\t\t\t$(\"p.jRatingInfos\").remove();\n\t\t\t\t},\n\t\t\t\tclick : function(e){\n                    var element = this;\n\n\t\t\t\t\t/*set vars*/\n\t\t\t\t\thasRated = true;\n\t\t\t\t\tglobalWidth = newWidth;\n\t\t\t\t\tnbOfRates--;\n\n\t\t\t\t\tif(!opts.canRateAgain || parseInt(nbOfRates) <= 0) $(this).unbind().css('cursor','default').addClass('jDisabled');\n\n\t\t\t\t\tif (opts.showRateInfo) $(\"p.jRatingInfos\").fadeOut('fast',function(){$(this).remove();});\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tvar rate = getNote(newWidth);\n\t\t\t\t\taverage.width(newWidth);\n\n\n\t\t\t\t\t/** ONLY FOR THE DEMO, YOU CAN REMOVE THIS CODE **/\n\t\t\t\t\t\t$('.datasSent p').html('<strong>idBox : </strong>'+idBox+'<br /><strong>rate : </strong>'+rate+'<br /><strong>action :</strong> rating');\n\t\t\t\t\t\t$('.serverResponse p').html('<strong>Loading...</strong>');\n\t\t\t\t\t/** END ONLY FOR THE DEMO **/\n\n\t\t\t\t\tif(opts.onClick) opts.onClick( element, rate );\n\n\t\t\t\t\tif(opts.sendRequest) {\n\t\t\t\t\t\t$.post(opts.phpPath,{\n\t\t\t\t\t\t\t\tidBox : idBox,\n\t\t\t\t\t\t\t\trate : rate,\n\t\t\t\t\t\t\t\taction : 'rating'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tfunction(data) {\n\t\t\t\t\t\t\t\tif(!data.error)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t/** ONLY FOR THE DEMO, YOU CAN REMOVE THIS CODE **/\n\t\t\t\t\t\t\t\t\t\t$('.serverResponse p').html(data.server);\n\t\t\t\t\t\t\t\t\t/** END ONLY FOR THE DEMO **/\n\n\n\t\t\t\t\t\t\t\t\t/** Here you can display an alert box,\n\t\t\t\t\t\t\t\t\t\tor use the jNotify Plugin :) http://www.myqjqueryplugins.com/jNotify\n\t\t\t\t\t\t\t\t\t\texemple :\t*/\n\t\t\t\t\t\t\t\t\tif(opts.onSuccess) opts.onSuccess( element, rate );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\t\t/** ONLY FOR THE DEMO, YOU CAN REMOVE THIS CODE **/\n\t\t\t\t\t\t\t\t\t\t$('.serverResponse p').html(data.server);\n\t\t\t\t\t\t\t\t\t/** END ONLY FOR THE DEMO **/\n\n\t\t\t\t\t\t\t\t\t/** Here you can display an alert box,\n\t\t\t\t\t\t\t\t\t\tor use the jNotify Plugin :) http://www.myqjqueryplugins.com/jNotify\n\t\t\t\t\t\t\t\t\t\texemple :\t*/\n\t\t\t\t\t\t\t\t\tif(opts.onError) opts.onError( element, rate );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t'json'\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tfunction getNote(relativeX) {\n\t\t\t\tvar noteBrut = parseFloat((relativeX*100/widthRatingContainer)*parseInt(opts.rateMax)/100);\n\t\t\t\tvar dec=Math.pow(10,parseInt(opts.decimalLength));\n\t\t\t\tvar note = Math.round(noteBrut*dec)/dec;\n\t\t\t\treturn note;\n\t\t\t};\n\n\t\t\tfunction getStarWidth(){\n\t\t\t\tswitch(opts.type) {\n\t\t\t\t\tcase 'small' :\n\t\t\t\t\t\tstarWidth = 21; // width of the picture small.png\n\t\t\t\t\t\tstarHeight = 17; // height of the picture small.png\n\t\t\t\t\t\tbgPath = opts.smallStarsPath;\n\t\t\t\t\tbreak;\n\t\t\t\t\tdefault :\n\t\t\t\t\t\tstarWidth = 25; // width of the picture stars.png\n\t\t\t\t\t\tstarHeight = 20; // height of the picture stars.png\n\t\t\t\t\t\tbgPath = opts.bigStarsPath;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tfunction findRealLeft(obj) {\n\t\t\t  if( !obj ) return 0;\n\t\t\t  return obj.offsetLeft + findRealLeft( obj.offsetParent );\n\t\t\t};\n\t\t});\n\n\t}\n})(jQuery);\n","(function(window){\n  \n  //self invoking function in variable\n  var List = (function(){\n    function List(params){\n      this.items = [];\n    }\n    List.prototype = {\n      add: function(item){\n        this.items.unshift(item);\n      },\n      remove: function(item){\n        var indexOf = this.items.indexOf(item);\n        if(indexOf !== -1){\n          this.items.splice(indexOf, 1);\n        }\n      },\n      find: function(callback, action){\n        var callbackReturn, //storing data into variable\n        items = this.items, //creating an alias\n        length = items.length, // calculating length of items\n        matches = [],\n        i = 0;\n        for(; i < length; i++){\n          callbackReturn = callback(items[i], i);\n          if(callbackReturn){\n            matches.push(items[i]);\n          }\n        }\n        if(action){\n          action.call(this, matches);\n        }\n        return matches;\n      }\n    };\n    return List;\n  }());\n  // creating factory method\n  List.create = function(params){\n    return new List(params);\n  };\n  window.List = List;\n}(window));","(function(window, google, List) {\n  var base_url = $('#base_url').val(); \n  // creating mapster object variable\n  var Mapster = (function(){\n    function Mapster(element, opts) {\n      this.gMap = new google.maps.Map(element, opts);\n      this.markers = List.create();\n    }\n\n    Mapster.prototype = {\n            fitBounds:function(bounds){\n              this.gMap.fitBounds(bounds);  \n            },\n            set_map_size:function(){\n                var map_header_height = $('#header').height();\n                var map_listing_options =$('.mapview-header').height();\n                var map_height = $('#viewport_div').height() - (map_header_height + map_listing_options);\n                $('.map-content').css({'height': map_height+\"px\"});\n                $('#properties-preview').css({'height': map_height+\"px\"});\n                $('.map-left').css({'height':map_height+\"px\"});\n                //set_pagination_position();\n            },\n\n            //make all markers images default\n            selectallmarker:function(){\n              //console.log(this.markers);\n              var allmarkers = this.markers;\n              //alert(allmarkers.items.length);\n                for (var i=0; i<allmarkers.items.length; i++){\n                  allmarkers.items[i].setIcon(base_url + '/images/map_pins_normal.png?v=1');\n                }\n            },\n\n            //change clicked markers image\n            selectmarker:function(marker){\n              // console.log(marker);\n              // console.log(marker[0]);\n              marker[0].setIcon(base_url + '/images/map-marker-selected.png?v=1');\n            },\n\n            //change hovered markers image\n            fetchmarker:function(marker){\n              if(marker[0].icon != base_url + '/images/map-marker-selected.png?v=1'){\n                marker[0].setIcon(base_url + '/images/map_pins_selected.png?v=1');\n              }\n            },\n\n            //make ouseout markers image normal\n            normalmarker:function(marker){\n                if(marker[0].icon != base_url + '/images/map-marker-selected.png?v=1'){\n                    marker[0].setIcon(base_url + '/images/map_pins_normal.png?v=1');\n                }\n            },\n\n            getBounds:function(){\n            bounds = this.gMap.getBounds();  \n            center = bounds.getCenter();\n            ne = bounds.getNorthEast();\n            sw = bounds.getSouthWest();\n\n            var nw = new google.maps.LatLng(ne.lat(), sw.lng());\n            var se = new google.maps.LatLng(sw.lat(), ne.lng());\n\n            // r = radius of the earth in statute miles\n            var r = 3963.0;  \n\n            // Convert lat or lng from decimal degrees into radians (divide by 57.2958)\n            var latc = center.lat() / 57.2958; \n            var lonc = center.lng() / 57.2958;\n            var latne = ne.lat() / 57.2958;\n            var lonne = ne.lng() / 57.2958;\n            var latnw = nw.lat() / 57.2958;\n            var lonnw = nw.lng() / 57.2958;\n            var latse = se.lat() / 57.2958;\n            var lonse = se.lng() / 57.2958;\n            var latn = nw.lat() / 57.2958;\n            var lngn = center.lng() / 57.2958;\n            var late = center.lat() / 57.2958;\n            var lnge = ne.lng() / 57.2958;\n\n\n            // distance = circle radius from center to Northeast corner of bounds\n            // distance between center and north-east\n\n              var disne = r * Math.acos(Math.sin(latc) * Math.sin(latne) + \n              Math.cos(latc) * Math.cos(latne) * Math.cos(lonne - lonc));\n            // distance between center and north\n\n              var disn = r * Math.acos(Math.sin(latc) * Math.sin(latn) + \n              Math.cos(latc) * Math.cos(latn) * Math.cos(lngn - lonc));\n            // distance between center and east\n\n              var dise = r * Math.acos(Math.sin(latc) * Math.sin(late) + \n              Math.cos(latc) * Math.cos(late) * Math.cos(lnge - lonc));\n\n              if (disn > dise){\n                var dis = dise;\n              }\n              else dis = disn;\n\n              var distance = new Object;\n              distance.lat = center.lat();\n              distance.lng = center.lng();\n              distance.dis = dis;\n\n              return distance;\n\n      },\n      // function to create zoom level\n      zoom: function(level) {\n        if(level){\n          this.gMap.setZoom(level);\n        } else {\n          return this.gMap.getZoom();\n        }\n      },\n      //private function to create events\n      _on: function(opts) {\n        var self = this;\n        google.maps.event.addListener(opts.obj, opts.event, function(e){\n          opts.callback.call(self, e);\n        });\n       },\n      // adding a marker\n      addMarker: function(opts) {\n        var marker;\n        opts.position = {\n          lat: opts.lat,\n          lng: opts.lng\n        }\n        marker = this._createMarker(opts);\n        //this.markerCluster.addMarker(marker);\n        this.markers.add(marker); \n        if(opts.event){\n          this._on({\n            obj: marker,\n            event: opts.event.name,\n            callback: opts.event.callback\n          });\n        }\n        //defining content for the marker\n        if(opts.content){\n          this._on({\n            obj: marker,\n            event: 'click',\n            callback: function(){\n              var allmarkers = this.markers;\n                for (var i=0; i<allmarkers.items.length; i++){\n                  allmarkers.items[i].setIcon(base_url + '/images/map_pins_normal.png');\n                }\n              marker.setIcon(base_url + '/images/map-marker-selected.png');\n              //console.log(opts.property_id);\n              // $('.preview-div').hide();\n              // $('#preview-div-'+opts.property_id).show(); \n              $('.property-box').css({\"border\": \"4px solid transparent\"});\n              // $('.property-box').css({\"background-color\": \"transparent\"});\n              $('#listing-div-'+opts.property_id).css({\"border\": \"4px solid #7ac596\"});\n              // $('#listing-div-'+opts.property_id).css({\"background-color\": \"4px solid #f1f1f1\"});\n              \n              // container = $('.search-properties');\n              // $('#listing-div-'+opts.property_id).offset().top() -;\n              // [0].scrollIntoView();\n              $('html,body').animate({\n                  scrollTop: $('#listing-div-'+opts.property_id).offset().top - $('#header').height() - 5\n              },1000);\n              \n              var infoWindow = new google.maps.InfoWindow({\n                content: opts.content,\n              });\n            }\n          });\n        }\n        return marker;\n      },\n      //find markers by its ids\n      findBy: function(callback){\n        return this.markers.find(callback);\n      },\n      //remove markers by its id\n      removeBy: function(callback){\n        this.markers.find(callback, function(markers){\n          markers.forEach(function(marker){\n            marker.setMap(null);\n          });\n        });\n      },\n      //private function to create markers\n      _createMarker: function(opts){\n       opts.map = this.gMap;\n        return new google.maps.Marker(opts);\n      }\n    };\n    return Mapster;\n  }());\n  Mapster.create = function(element, opts) {\n    return new Mapster(element, opts);\n  };\n  window.Mapster = Mapster;\n}(window, google, List));","(function(window,google, mapster){\n  var lat = parseFloat($('#searchlat').val());\n  var lng = parseFloat($('#searchlng').val());\n\n  var styleArray = [\n\t  {\n\t    featureType: \"all\",\n\t    stylers: \n\t    [\n\t      { visibility: \"on\" }\n\t    ]\n\t  },\n\t  {\n\t    featureType: \"poi\",\n\t    stylers: \n\t    [\n\t      { visibility: \"on\" }\n\t    ]\n\t  },\n\t  {\n\t    featureType: \"poi.business\",\n\t    stylers: \n\t    [\n\t      { visibility: \"off\" }\n\t    ]\n\t  },\n\t  {\n        \"featureType\": \"landscape\",\n        \"stylers\": [\n            {\n                \"hue\": \"#FFBB00\"\n            },\n            {\n                \"saturation\": 43.400000000000006\n            },\n            {\n                \"lightness\": 37.599999999999994\n            },\n            {\n                \"gamma\": 1\n            }\n        ]\n    },\n    {\n        \"featureType\": \"road.highway\",\n        \"stylers\": [\n            {\n                \"hue\": \"#FFC200\"\n            },\n            {\n                \"saturation\": -61.8\n            },\n            {\n                \"lightness\": 45.599999999999994\n            },\n            {\n                \"gamma\": 1\n            }\n        ]\n    },\n    {\n        \"featureType\": \"road.arterial\",\n        \"stylers\": [\n            {\n                \"hue\": \"#FF0300\"\n            },\n            {\n                \"saturation\": -100\n            },\n            {\n                \"lightness\": 51.19999999999999\n            },\n            {\n                \"gamma\": 1\n            }\n        ]\n    },\n    {\n        \"featureType\": \"road.local\",\n        \"stylers\": [\n            {\n                \"hue\": \"#FF0300\"\n            },\n            {\n                \"saturation\": -100\n            },\n            {\n                \"lightness\": 52\n            },\n            {\n                \"gamma\": 1\n            }\n        ]\n    },\n    {\n        \"featureType\": \"water\",\n        \"stylers\": [\n            {\n                \"hue\": \"#0078FF\"\n            },\n            {\n                \"saturation\": -13.200000000000003\n            },\n            {\n                \"lightness\": 2.4000000000000057\n            },\n            {\n                \"gamma\": 1\n            }\n        ]\n    },\n\n    {\n        \"featureType\": \"poi\",\n        \"stylers\": [\n            {\n                \"hue\": \"#00FF6A\"\n            },\n            {\n                \"saturation\": -1.0989010989011234\n            },\n            {\n                \"lightness\": 11.200000000000017\n            },\n            {\n                \"gamma\": 1\n            }\n        ]\n    }\n\t];\n\n  mapster.MAP_OPTIONS = {\n    center: {\n\t\t\tlat: lat,\n\t\t\tlng: lng\n\t\t},\n\t\tzoom: 12,\n\t\tdisableDefaultUI: true,\n\t\tscrollwheel: false,\n\t\tstreetViewControl: false,\n\t\tpanControl: false,\n\t\tdraggable: true,\n\t    mapTypeControl: false,\n\t\tmaxZoom: 16,\n\t\tminZoom:1,\n\t\tzoomControl:false,\n\t\tstyles:styleArray,\n\t\tmapTypeId: google.maps.MapTypeId.ROADMAP,\n\t\tstyles: styleArray,\n\t\tzoomControlOptions: {\n\t\t  style: google.maps.ZoomControlStyle.SMALL\n\t\t},\n\t\tpanControlOptions: {\n\t\t  position: google.maps.ControlPosition.LEFT_BOTTOM,\n\t\t}\n  };\n  \n}(window,google, window.Mapster || (window.Mapster = {})));","//base url for search\nvar base_url = $('#base_url').val(); \nvar search_path = $('#search_path').val(); \nvar search_slug = $('#search_slug').val(); \nvar search_controller_url = base_url + '/' + search_path + \"/\";\nvar search_url = base_url + '/' + search_slug + \"/\";\n\nvar view_changed = 0;\nvar map;\nvar location_change_trigger = 0;\n\n// handlebars helpers\nHandlebars.registerHelper('ifCond', function (v1, operator, v2, options) {\n\n    switch (operator) {\n        case '==':\n            return (v1 == v2) ? options.fn(this) : options.inverse(this);\n        case '===':\n            return (v1 === v2) ? options.fn(this) : options.inverse(this);\n        case '<':\n            return (v1 < v2) ? options.fn(this) : options.inverse(this);\n        case '<=':\n            return (v1 <= v2) ? options.fn(this) : options.inverse(this);\n        case '>':\n            return (v1 > v2) ? options.fn(this) : options.inverse(this);\n        case '>=':\n            return (v1 >= v2) ? options.fn(this) : options.inverse(this);\n        case '&&':\n            return (v1 && v2) ? options.fn(this) : options.inverse(this);\n        case '||':\n            return (v1 || v2) ? options.fn(this) : options.inverse(this);\n        case 'objlen':\n        \treturn (v1 || Object.keys(v2).length) ? options.fn(this) : options.inverse(this);\n        default:\n            return options.inverse(this);\n    }\n\n});\nHandlebars.registerHelper(\"ifObjLen\", function(json, options) {\n    var len = Object.keys(json).length;\n    //\tconsole.log(len)\n    return (len > 0) ? options.fn(this) : options.inverse(this);\t\n});\n// handlebars helpers\n\n//displays property tiles \nfunction create_property_tile_ui(data){\n\tvar source   = $(\"#property-tile-template\").html();\n\tvar template = Handlebars.compile(source);\n\tfor (var i = 0; i < data.list.length; i++) {\n\t\t//load in html\t\t\n\t\tvar obj = {\n\t\t\t\t\t'index' : i,\n\t\t\t\t\t'id' : i+1,\n\t\t\t\t\t'row' : data.list[i], \n\t\t\t\t\t'checkin' : data.checkin, \n\t\t\t\t\t'checkout' : data.checkout, \n\t\t\t\t\t'guests' : data.guests,\n\t\t\t\t\t'bedrooms' : data.bedroom,\n\t\t\t\t\t'show_earlybird_90_banner' : data.show_earlybird_90_banner,\n\t\t\t\t\t'show_earlybird_45_banner' : data.show_earlybird_45_banner,\n\t\t\t\t\t'show_app_banner' : data.show_app_banner,\n\t\t\t\t\t'app_banner_url' : data.app_banner_url,\n\t\t\t\t\t'content' : data.content,\n\t\t\t\t\t'last_index' :  data.list.length - 1,\n\t\t\t\t\t'pagination_content' :  data.pagination_content,\n\t\t\t\t\t'promo_banner_pre_login' : data.promo_banner_pre_login,\n\t\t\t\t\t'promo_banner_post_login' : data.promo_banner_post_login,\n\t\t\t\t};\t\n\t\t\t\t// console.log(obj);\n\t\tvar html = template(obj);\n\t\t$('.tiles-content>ul').append(html);\n\t\t$('[data-toggle=\"tooltip\"]').tooltip(); \n\t};\t\n}\n\n//loads div to intiate infinite scroll\nfunction create_infinite_scroll_ui(data){\n\tvar source = $(\"#infinite-scroll-template\").html();\n\tvar template = Handlebars.compile(source);\n\tvar html = template(data);\n\t$('.tiles-content>ul').append(html);\n}\n\nfunction create_no_results_ui(){\n\tvar html = $('#no-results-template').html();\n\t$('.tiles-content>ul').html(html);\n}\n\n//location filter ui\nfunction create_property_type_filter_ui(data){\n\tvar source = $(\"#property-type-ui-template\").html();\n\tvar template = Handlebars.compile(source);\n\tvar obj = {\n\t\t\t\t\t'all_property_type' : data, \n\t\t\t\t};\n\tvar html = template(obj);\n\t$('.property-type-section').html(html);\n\t$('[data-toggle=\"tooltip\"]').tooltip(); \n\tcalculateMoreItem();\n}\n\n//location filter ui\nfunction create_location_filter_ui(data){\n\tvar source = $(\"#location-ui-template\").html();\n\tvar template = Handlebars.compile(source);\n\tvar obj = {\n\t\t\t\t\t'location_data' : data, \n\t\t\t\t};\n\tvar html = template(obj);\n\t$('.location-section').html(html);\n}\n\nfunction get_search_keywords(){\n\tvar search_keyword = []\n\t$('.location-checkbox:checked').each(function(){\n\t\tsearch_keyword.push($(this).val());\n\t});\n\treturn search_keyword;\n}\n\nfunction read_url(){\n\n\tvar qry = window.location.search;\n\tquery = qry.split('?');\n\tparams = [];\n\tif(query.length > 1)\n\t\tparams = query[1].split('&');\n\t$('.search-filter:not(\"#coa,#ib\")').attr('checked',false);\n\t$('.location-filter-page').attr('checked',false);\n\tfor (var i = params.length - 1; i >= 0; i--) {\n\t\tvar arr = params[i].split('=');\n\t\tarr[0] = arr[0].replace('%5B%5D','');\n\t\tarr[0] = arr[0].replace('[]','');\n\t\t\n\t\tif(arr[0] == 'roomtype'){\n\t\t\t$('#room_type_'+arr[1]).prop('checked',true);\n\t\t\tcontinue;\n\t\t}\t\t\t\t\n\n\t\tif(arr[0] == 'property_type'){\n\t\t\t$('#property_type_'+arr[1]).prop('checked',true);\n\t\t\tcontinue;\n\t\t}\n\t\t\n\t\tif(arr[0] == 'amenities'){\n\t\t\t$('#amenity_index_'+arr[1]).prop('checked',true);\n\t\t\tcontinue;\n\t\t}\t\t\t\n\n\t\tif(arr[0] == 'search_keyword'){\n\t\t\tarr[1] = arr[1].replace(/[^A-Za-z0-9]/g,'').toLowerCase();\n\t\t\t$('#search_keyword_'+arr[1]).prop('checked',true);\n\t\t\t$('#search_keyword_mob_'+arr[1]).prop('checked',true);\n\t\t\t$('#'+arr[1]).prop('checked',true);\n\t\t\tcontinue;\n\t\t}\n\t}\n\t$(\"body input:checkbox:not('#coa,#ib')\").each(function() {\n                if($(this).is(':checked'))\n                {\n                  var $this = $(this).parent('li');\n                 $this.insertBefore($this.siblings(':eq(0)'));\n             }\n         });\n\n\n\n\t// move selected checkbox in filters to top\n\t// $(\"body input:checkbox:not('#coa,#ib')\").each(function() {\n\t// \tif($(this).is(':checked'))\n\t// \t{\n\t// \t\tvar $this = $(this).parent('li');\n\t//         $this.insertBefore($this.siblings(':eq(0)'));\n\t//     }\n\t// });\n}\n\n// infinite scroll script start\nfunction load_properties(elem)\n{\n\tif(!$(elem).length)\n\t\treturn;\n\n\t//do not trigger loder if filter are being applied\n\tif($(\"#search-loader\").is(\":visible\")){\n\t\treturn;\n\t}\n\n\tvar offset_top = $(elem).offset().top;\n\tvar elem_height = $(elem).height();\n\tvar viewport_height = $(window).height();\n\tvar scrollTop = $(window).scrollTop();\n\tif(offset_top + elem_height <= viewport_height + scrollTop + 100 && !$(elem).hasClass('loading')){\n\t\t$(elem).addClass('loading');\n\t\t// alert(offset_top + elem_height);\n\t\t// alert(viewport_height + scrollTop);\n\t\tvar link = $(elem).data('url');\n\n\t\t$.ajax({\n\t\t\turl: link,\n\t\t\ttype: \"post\",\n\t\t\tdataType: 'json',\n\t\t\tdata: {search_keyword: get_search_keywords()},\n\t\t\tsuccess:function(data)\n\t\t\t{\n\t\t\t\tcreate_property_tile_ui(data);\n\t\t\t\tcreate_infinite_scroll_ui(data);\n\t\t\t\t//remove currenct infinite scroll view\t\t\t\t\n\t\t\t\t$(elem).remove();\n\t\t\t\t// $('.search-properties ul').append(data);\n\t\t\t\t// centerImagebuttons();\n\t\t\t} \n\t\t});\n\t}\t\t\n}\t\n// infinite scroll script end\n\n//set ajax loader position function start\nfunction setLoaderPosition()\n{\n\t// $('#search-loader').show();\n\tvar window_height = $(window).height();\n\tvar body_width = $('body').width();\n\tvar scroll_top = $(window).scrollTop();\n\tvar header_height = $(\"#header\").height();\n\tvar loader_pos = scroll_top + window_height/2 - (body_width > 767 ? 150/2 : 100/2) - header_height;\n\t$(\"#search-loader\").show().css({\"background-position\" : \"center\"  + \" \" +loader_pos + \"px\"});\n\t$(\".map-new-search .stopmapscroll\").show();\n\t$(\".pagination-hide\").show();\n}\n//set ajax loader position function end\n\n//add pins to map from json start\nvar markerArr = [];\nvar trigger_zoom_changed = 0;\nvar is_same_latlng = 1;\nfunction add_pins_to_map(map_json,set_bounds)\n{\n\tis_same_latlng = 1;\n\tmarkerArr.forEach(function(marker)\n\t{\n\t\tmarker.setMap(null);\n\t});\n\n\tvar latlngbounds = new google.maps.LatLngBounds();\n\tvar f_lat = '';\n\tvar f_lng = '';\n\n\tfor(var i=0; i< map_json.length; i++)\n\t{\n\t\tif(is_same_latlng == 1)\n\t\t{\n\t\t\tif(i==0)\n\t\t\t{\n\t\t\t\tf_lat = map_json[i].latitude;\n\t\t\t\tf_lng = map_json[i].longitude;\n\t\t\t}\n\t\t\telse if(f_lat == map_json[i].latitude && f_lng == map_json[i].longitude)\n\t\t\t{\n\t\t\t\tis_same_latlng = 1;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tis_same_latlng = 0;\n\t\t\t}\n\t\t}\n\n\t\t//add markers\n\t\tvar marker = map.addMarker({\n\t\t\tid: map_json[i].id,\n\t\t\tproperty_id: map_json[i].id,\n\t\t\tlat: parseFloat(map_json[i].v_lat),\n\t\t\tlng: parseFloat(map_json[i].v_lng),\n\t\t\tdraggable: false,\n\t\t\tcontent: '<a href =\"'+ map_json[i].property_link+'\"><div class=\"price\">'+map_json[i].price+'</div></a>, '+map_json[i].title+'<br>'+map_json[i].city+', <a href =\"'+ map_json[i].property_link+'\"><img src=\"'+ map_json[i].image+'\" /></a> <div>',\n\t\t\t//icon: 'http://icons.iconarchive.com/icons/icons-land/vista-map-markers/32/Map-Marker-Marker-Outside-Chartreuse-icon.png'\n\t\t\ticon: base_url + '/images/map_pins_normal.png'\n\t\t});\n\t\tmarkerArr.push(marker);\n\n\t\tlatlngbounds.extend(new google.maps.LatLng(parseFloat(map_json[i].latitude), parseFloat(map_json[i].longitude)));        \n\t\t//add bounds\n\t}\n\n\tif(set_bounds == 1)\n\t{\n\t\ttrigger_zoom_changed = 0; \n\t\tif(map_json.length>0)\n\t\t{\n\t\t\tmap.fitBounds(latlngbounds);\n\t\t}\n\t}\n}\n//add pins to map from json end\n\nfunction show_loader(){\n\t$('.tile-column').addClass('loading');\n}\n\nfunction hide_loader(){\n\t$('.tile-column').removeClass('loading');\n}\n\n//search ajax start\nfunction load_properties_url(link,set_bounds)\n{\n\n\tshow_loader();\n\tlink = link.replace(\"/?\", \"?\");\n\t$.ajax({\n\t\turl: link,\n\t\ttype: \"post\",\n\t\tdataType: \"json\",\n\t\tdata: {search_keyword: get_search_keywords()},\n\t\tsuccess:function(data)\n\t\t{\n\t\t\thide_loader();\n\t\t\t$('.tiles-content>ul').html('');\n\t\t\t$('.total-tiles>span').text(data.rentals);\n\t\t\tif(data.list.length){\n\t\t\t\tcreate_property_tile_ui(data);\n\t\t\t\tcreate_infinite_scroll_ui(data);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tcreate_no_results_ui();\n\t\t\t}\n\t\t\tif(location_change_trigger == 1){\n\t\t\t\tcreate_location_filter_ui(data.location_data);\n\t\t\t\tcreate_property_type_filter_ui(data.all_property_type);\n\t\t\t\tlocation_change_trigger = 0;\n\t\t\t}\n\t\t\t//reset tilecapture arrays\n\t\t\ttileCapture.resetArrays();\n\t\t\t//reset tilecapture arrays end\n\t\t\t$(window).scrollTop(0);\t\t\t\n\n\t\t\t//add entry in google analytics\n\t\t\tvar dim_country = $('#adrs_country_name').val();\n\t\t\tvar dim_state = $('#adrs_state').val();\n\t\t\tvar dim_city = $('#adrs_city').val();\n\t\t\t// alert(dim_country);\n\t\t\t\n\t\t\tvar dim_ptype_array = [];\n\t\t\t$(\"[name='property_type[]']\").each(function(){\n\t\t\t\tvar p_value = '';\n\t\t\t\tif($(this).is(':checked')){\n\t\t\t\t\tp_value = $(this).parent('li').find('label').text();\n\t\t\t\t\tif(p_value != ''){\t\t\t\t\t\t\t\n\t\t\t\t\t\tdim_ptype_array.push(p_value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tdim_ptype = dim_ptype_array.join();\n\t\t\tif(dim_country != ''){\n\t\t\t\tga('set', 'dimension3', dim_country);\t\t\t\t\n\t\t\t}\n\n\t\t\tif(dim_state != ''){\n\t\t\t\tga('set', 'dimension4', dim_state);\t\t\t\t\n\t\t\t}\t\t\t\n\n\t\t\tif(dim_city != ''){\n\t\t\t\tga('set', 'dimension5', dim_city);\t\t\t\t\n\t\t\t}\t\n\n\t\t\tif(dim_ptype != ''){\n\t\t\t\tga('set', 'dimension6', dim_ptype);\t\t\t\t\n\t\t\t}\t\n\n\t\t\tga('send', 'pageview',link);\n\t\t\tga('set', 'dimension3', null);\t\t\t\t\n\t\t\tga('set', 'dimension4', null);\t\t\t\t\n\t\t\tga('set', 'dimension5', null);\t\t\t\t\n\t\t\tga('set', 'dimension6', null);\t\t\t\t\n\t\t\t//end\n\n\t\t\t$('#properties-inner-container').html(data);\n\t\t\t$('.rentals-found').html($('#rentals_found').val());\n\t\t\t$(\"#search-loader\").hide();\n\t\t\t$(\".map-new-search .stopmapscroll\").hide();\n\t\t\t$(\".pagination-hide\").hide();\n\t\t\thistory.pushState(null, null, link+'&_');\n\t\t\t$('body').addClass('historypushed');\n\n\t\t\tif($(\"#rentalscount\").val() == 0)\n\t\t\t{\t\n\t\t\t\t// loaderHeight();\n\t\t\t\t$(\".noresult-search\").show();\n\t\t\t\t$('.rentals-found').hide();\n\t\t\t}\n\t\t\telse\n\t\t\t\t$('.rentals-found').show();\n\n\t\t\t//when map view is active\n\t\t\tif($('#view').val() == 'map'){\n\t\t\t\tmyArray = data.list;\n\t\t\t\tinitialPage = data.page;\n\t\t\t\tinitialize();\n\t\t\t\t/*alert(\"\")\n\t\t\t\tmyArray = data.list;\n\t\t\t\tinitialize();*/\n\t\t\t\t//redoDrag(map,1);\n\t\t\t\t/*if(map){\n\t\t\t\t\tmap_json = JSON.parse($('#map_json').val());\n\t\t\t\t\tadd_pins_to_map(map_json,set_bounds);\t\t\t\t\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tinitialize_map();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tsetTimeout(function(){\n\t\t\t\t\t$('.side-filters.relative').css({'margin-top':'0px'});\t\t\t\t\t\n\t\t\t\t},100);*/\n\t\t\t}\n\n\t\t\t$('.property-type-list').html($('.property-type-list-hidden').html());\n\t\t\t$('.property-type-list-hidden').empty();\n    \t\tif(view_changed == 1)\n    \t\t{\t\n    \t\t\tread_url();\n\t\t\t\tif($('.search-filter').hasClass('search-filter-hidden'))\n\t\t\t\t\t$('.search-filter').removeClass('search-filter-hidden');\n\t\t\t\t\n\t\t\t\tview_changed = 0;\n\t\t\t}\n\t\t\tcenterImagebuttons();\n\t\t\tset_search_bar_text();\n\n\t\t\t$('#dpd1').val() != '' ? $('#checkin-heading').html($('#dpd1').val()) : $('#checkin-heading').html('--')\n\t\t\t$('#dpd2').val() != '' ? $('#checkout-heading').html($('#dpd2').val()) : $('#checkout-heading').html('--')\n\t\t\t$('#guestCountValue_3').val() != 0 ? $('#guest-heading').html($('#guestCountValue_3').val()) : $('#guest-heading').html('--')\n\t\t\t$('#bedroomCountValue_3').val() != 0 ? $('#bedrooms-heading').html($('#bedroomCountValue_3').val()) : $('#bedrooms-heading').html('--')\n\t\t\t//fill modify bar details end\n\t\t\t\n\t\t\tupdatePropertyUrl();\n\n\t\t} \n\t});\n}\n//search ajax end\nfunction updatePropertyUrl(){\n\t\nvar qry = window.location.search;\n\tquery = qry.split('?');\n\t$('.property-option a').each(function()\n\t{\n\t\tvar obj = $(this);\n\t\tvar existing_url = obj.attr('href');\n\t\tvar newslpit = existing_url.split('?');\n\t\t\n\t\tvar new_url = newslpit[0]+ \"?\" +query[1];\n\t\t\n\t\tobj.attr('href',new_url);\t\n\t\t\n\t});\n}\nfunction set_search_bar_text(){\n\tif($('#adrs_state').val() != '' && $('#adrs_city').val() != '')\n\t{\n\t\t$('#bread-crumbs-heading').html($('#adrs_city').val() + ', ' + $('#adrs_state').val());\n\t\t$('.header-search-placeholder').val($('#adrs_city').val() + ', ' + $('#adrs_state').val());\n\t}\n\telse if($('#adrs_state').val() != '')\n\t{\n\t\t$('#bread-crumbs-heading').html($('#adrs_state').val() + ', ' + $('#adrs_country_name').val());\n\t\t$('.header-search-placeholder').val($('#adrs_state').val() + ', ' + $('#adrs_country_name').val());\n\t}\n\telse\n\t{\n\t\t$('#bread-crumbs-heading').html($('#adrs_country_name').val());\n\t\t$('.header-search-placeholder').val($('#adrs_country_name').val());\n\t}\n}\n\nset_search_bar_text();\n\n//mobile search start\n$('body').on('click','.apply-filter-mob',function()\n{\n\tvar sort = $('#sort').val();\n\tvar location = $('#address_mob').val();\n\tvar lat = $('#temp_searchlat').val();\n\tvar lng = $('#temp_searchlng').val();\n\tvar country = $('#temp_adrs_country').val();\n\tvar state = $('#temp_adrs_state').val();\n\tvar city = $('#modify_city_mob').val();\n\tvar guests = $('#guestCountValue').val();\n\tvar bedroom = $('#bedroomCountValue').val();\n\tvar minvalue = $('#minvalue').val();\n\tvar maxvalue = $('#maxvalue').val();\n\tvar params = $('.location-filter-mob,.dpd,.mobile-filter-chkbox').serialize();\n\tparams = 'sort=' + sort  + '&location=' + location + '&lat=' + lat + '&lng=' + lng +'&country=' + country + '&state=' + state + '&city=' + city + '&guests=' + guests + '&bedroom=' + bedroom + '&minvalue=' + minvalue + '&maxvalue=' + maxvalue + '&' + params;\n\t\n\t//make url clean\n\tvar param_array = params.split('&');\n\tvar final_param_arr = [];\n\tfor(var i = 0 ; i < param_array.length ; i++){\n\t\tvar v_arr = param_array[i].split('=');\n\t\tif(v_arr[1] != '')\n\t\t\tfinal_param_arr.push(param_array[i]);\n\t}\n\tparams = final_param_arr.join('&');\n\t//make url clean\n    var url = search_url + \"?\" + params;\n    // console.log(url);\n    // return;\n\tload_properties_url(url,0);\n\t$('#xs-filter-modal').modal('hide');\n});\n//Mobile search end\n\n//text search params start\nvar searchTimer;\n\nfunction get_search_url(view)\n{\n\t$(\"#view\").val(view);\n\tvar params = $('.search-filter,.location-filter-page,.map-filter,.location-filter-modal').serialize();\n\n\t//make url clean\n\tvar param_array = params.split('&');\n\tvar final_param_arr = [];\n\tfor(var i = 0 ; i < param_array.length ; i++){\n\t\tvar v_arr = param_array[i].split('=');\n\t\tif(v_arr[1] != '')\n\t\t\tfinal_param_arr.push(param_array[i]);\n\t}\n\tparams = final_param_arr.join('&');\n    var url = search_url + \"?\" + params;\n    return url;\n}\n\nfunction text_params(map_event,address_event,reset_event,redirect_to_search)\n{ \n\tmap_event = (typeof map_event === 'undefined') ? 0 : map_event;\n\taddress_event = (typeof address_event === 'undefined') ? 0 : address_event;\n\treset_event = (typeof reset_event === 'undefined') ? 0 : reset_event;\t\n\tvar is_map_event = (typeof map_event === 'undefined') ? 0 : map_event;\n\n\tif($(\"#view\").val() == \"map\" && map)\n\t{\n\t\tif(map_event)\n\t\t{\n\t\t\tvar distance = map.getBounds();\n\t\t\tvar zoom = map.gMap.getZoom();\n\t\t\t$('#searchlat').val(distance.lat);\n\t\t\t$('#searchlng').val(distance.lng);\n\t\t\t$('#dis').val(distance.dis);\n\t\t\t$('#zoom').val(zoom);\n\t\t\tvar params = $('.search-filter,.map-filter').not(\".location-filter,#adrs_location,.search-filter-hidden\").serialize();\n\t\t}\n\t\telse\n\t\t\tvar params = $('.search-filter,.map-filter').not(\".location-filter,.search-filter-hidden\").serialize();\n\t}\n\telse\n\t{\n\t\tvar params = $('.search-filter,.location-filter-page,.map-filter,.location-filter-modal').serialize();\n\t}\n\n\t//make url clean\n\tvar param_array = params.split('&');\n\tvar final_param_arr = [];\n\tfor(var i = 0 ; i < param_array.length ; i++){\n\t\tvar v_arr = param_array[i].split('=');\n\t\tif(v_arr[1] != '')\n\t\t\tfinal_param_arr.push(param_array[i]);\n\t}\n\tparams = final_param_arr.join('&');\n    var url_s = search_url + \"?\" + params;\n    \n\tif(redirect_to_search){\n\t\tvar directUrl = base_url+ \"/search/s?\" +params;\n\t\twindow.location.href = directUrl;\n\t}\n\tif($(\"#view\").val() == \"map\" && map && address_event==1){\n\t\t//window.location.href=url_s;\n\t\treset_filter_flag = 1;\n\t\t$('.search-filter').removeAttr('checked','checked');\n\t\t$('.location-checkbox-copy').removeAttr('checked','checked');\n\t\tresetSlider();\n\t}\n\tif($(\"#view\").val() == \"map\" && map && reset_event==1){\n\t\twindow.location.href=url_s;\n\t}\n\t\n\tif($(\"#view\").val() == \"map\"){\n\t\turlP = makePrevUrl(urlP,url_s);\n\t\turl = makeNextUrl(url,url_s);\n\t}\n\t\n\tclearTimeout(searchTimer);\n    searchTimer = setTimeout(function(){\n    \t//move selected checkbox in filters to top\n    \t$(\"body input:checkbox:not('#coa,#ib')\").each(function() {\n\t\t\tif($(this).is(':checked'))\n\t\t\t{\t\t\t\t\n\t\t\t\tvar index = $(this).parents('li').index();\n\t\t\t\tvar preChecked = $(this).parents('li').prevAll('li').find('input:checked').length;\n\t\t\t\tif(preChecked == index) return;\n\n \t\t\t\tvar $this = $(this).parent('li');\n\t\t     //    callback = function() {\n\t\t     //        $this.insertBefore($this.siblings(':eq(0)'));\n\t\t     //    };\n\t\t    \t// $this.slideUp(500, callback).slideDown(500);\n\t\t    }\n\t\t});\n\n\t    load_properties_url(url_s,0);\n    },100);\n   \n}\n//text search params end\n\nfunction datechanged()\n{\n\tif($('#dpd1').val() != '' && $('#dpd2').val() != '')\n\t{\n\t\tsetTimeout(function(){\n\t\t\t$('.checkin_header').val($('#dpd1').val());\n\t\t\t$('.checkout_header').val($('#dpd2').val());\n\t\t\n\t\tvar window_width = $(window).width();\n\t\tif(window_width < 768)\n\t\t\treturn;\n\t\telse\n\t\t\ttext_params();\n\t\t},200);\n\t}\n}\t\n\nfunction fixMap()\n{\n \tvar window_height = $(window).height();\n \tvar header_height = $(\"#header\").height();\n \t$('#map-canvas, .stopmapscroll').height(window_height - header_height);\n\treturn;\n}\n\n//Filter header footer\nvar window_width = $(window).width();\nvar window_height= $(window).height();\nfunction modalSet()\n{\n\tvar window_height= $(window).height();\n\tvar modal_head = $(\"#mobile-filters .modal-header\").height();\n\tvar modaltoset =  window_height - modal_head;\n\t$(\"#mobile-filters .modal-body\").height(modaltoset);\n}\n//Filter header footer\n\n\n//loader height\nfunction loaderHeight()\n{\n\treturn;\n\tvar sidefilter_height = $('.side-filters').height();\t\n\tvar header_height = $('#header').height();\n\tvar body_width = $('body').width();\n\tvar window_height = $(window).height();\n\tif(body_width < 768)\n\t\t$(\".search-properties\").css({  \"min-height\" : window_height - $('.navbar').height() +'px'});\t\t\t\n\telse\n\t\t$(\".search-properties\").css({  \"min-height\" : sidefilter_height - $('#header').height() +'px'});\n}\n//loader height\n\nfunction adjustCss(){\n\tvar window_height = $(window).height(); \n\tvar header_height = $('#header').height();\n\tif($('body').width() > 767){\n\t\t$('#searh-cont').css({'margin-top' : header_height+'px'});\n\t}\n\n\tif($('body').width() < 768){\n\t\t$('#searh-cont').css({'margin-top' : header_height+'px'});\n\t}\n\n\t//set filters min height to occupy windows height\n\tif($('body').width() < 768){\n\t\t$('.side-filters').css({'min-height' : ''});\n\t}\n\telse{\n\t\t$('.side-filters').css({'min-height' : window_height-header_height+'px'});    \t\t\t\n\t}\n}\n\n//mapview remove for 767px\nfunction hideMapView(){\n\t\n\tvar first_condition = ($('body').width() <= 767);\n\tvar second_condition = ($(\"#searh-cont\").children(\"div\").hasClass(\"map-new-search\"));\n\tif( first_condition && second_condition ){\n\t\t$( \".list-v-btn\" ).trigger( \"click\" );\n\t}\n\n}\n//mapview remove for 767px\n\n//Tab view\nfunction tabView(){\n\tvar first_condition = ($(window).width() == 768);\n\tvar second_condition = ($(window).height() == 1024);\n\t// console.log(first_condition && second_condition);\n\tif( first_condition && second_condition ){\n\t\t$( \".list-v-btn\" ).trigger( \"click\" );\n\t\t$(\".switchview-btn\").hide();\n\t}\n\telse{\n\t\t$(\".switchview-btn\").show();\n\t}\n}\n//Tab view\n\nfunction fetch_city(state){\n\treturn;\n\t$('.mdfy-search-btn').addClass('disabled');\n\tvar state = state;\n\tvar city = $('#temp_adrs_city').val();\n\tvar area = $('#temp_adrs_area').val();\n\tvar link = search_controller_url + 'fetchcity';\n\n\t$.ajax({\n\t\turl: link,\n\t\ttype: \"get\",\n\t\tdata: {\n\t\t\t'state' : state,\n\t\t\t'city' \t: city,\n\t\t\t'area'\t: area\n\t\t},\n\t\tsuccess:function(data)\n\t\t{\n\t\t\t$('#modify_city').html(data);\n\t\t\t$('#modify_city_mob').html(data);\n\t\t\t$('.search-location-modal').html('');\n\t\t\t$('.mdfy-search-btn').removeClass('disabled');\n\t\t\tif(data.length && $('#modify_city').val() != '')\n\t\t\t{\n\t\t\t\tvar window_width = $(window).width();\n\t\t\t\tif(window_width < 768)\n\t\t\t\t\tfetch_area($('#modify_city').val(),1);\n\t\t\t\telse\n\t\t\t\t\tfetch_area($('#modify_city').val());\n\t\t\t}\n\t\t\tif($('#modify_city').val() == '')\n\t\t\t\t$('#location-area-modal').hide();\n\n\t\t} \n\t});\n}\n\nfunction fetch_area(city,mob){\n\treturn;\n\t$('.mdfy-search-btn').addClass('disabled');\n\tvar city = city;\n\tvar state = $('#temp_adrs_state').val();\n\tvar link = search_controller_url +  \"findarea?modal=1\";\n\tvar screen_width = $(window).width();\n\tif(mob==1)\n\t\tvar link = search_controller_url +  \"findarea?modal=2\";\n\n\t$.ajax({\n\t\turl: link,\n\t\ttype: \"get\",\n\t\tdata: {\n\t\t\t'city' \t: city,\n\t\t\t'state'\t: state\n\t\t},\n\t\tsuccess:function(data)\n\t\t{\n\t\t\t$('.mdfy-search-btn').removeClass('disabled');\n\t\t\t$('#location-area-modal').show();\n\t\t\t$('#location-area-mob').show();\n\t\t\tif(screen_width < 768)\n\t\t\t\t$('.regions-mdfy-mob').html(data);\n\t\t\telse\n\t\t\t\t$('#location-area-modal').html(data);\n\n\t\t\tread_url();\n\t\t} \n\t});\n}\n\n$('body').on('change','#modify_city',function(){\n\tvar city = $('#modify_city').val();\n\tfetch_area(city);\n});\n\n$('body').on('change','#modify_city_mob',function(){\n\tvar city = $('#modify_city_mob').val();\n\tvar mob = 1;\n\tfetch_area(city,mob);\n});\n\n$('.mdfy-search-btn').click(function(){\n\t$('.location-filter-page').each(function(){\n\t\t$(this).prop('checked', false);\n\t});\n\n\t$('.location-filter-modal').each(function(){\n\t\tvar chk_id = '#search_keyword_'+ $(this).attr('id');\n\t\tif($(this).is(':checked'))\n\t\t\t$(chk_id).prop('checked', true);\n\t\telse\n\t\t\t$(chk_id).prop('checked', false);\n\t});\n\t$('#adrs_country').val($('#temp_adrs_country').val());\n\t$('#adrs_state').val($('#temp_adrs_state').val());\n\t$('#adrs_city').val($('#modify_city').val());\n\t$('#adrs_area').val($('#temp_adrs_area').val());\n\t$('#searchlat').val($('#temp_searchlat').val());\n\t$('#searchlng').val($('#temp_searchlng').val());\n\n\t$(\".mdfy-cancel-btn\").click();\n\t\n\t$('.modify-searchbar').css({\n\t\t'z-index' : 1\n\t});\n\n\t$('.modify-searchbar-wrap').css({\n\t\t'z-index' : 9,\n\t\t'position' : 'relative'\n\t});\n\n\t$('#adrs_location').val(($('#address').val()));\n\n\tvar modal_state = $('#adrs_state').val();\n\tvar modal_city = $('#modify_city').val();\n\tvar modal_area = [''];\n\n\t$('.location-filter-modal').each(function(){\n\t\tif($(this).is(':checked'))\n    \t{\n\t\t\tmodal_area.push($(this).val());\t\n    \t}\n\t});\n\n\t$.ajax({\n\t\turl: search_controller_url +  \"locationdata\",\n\t\ttype: \"get\",\n\t\tdata: {\n\t\t\t'state' : modal_state,\n\t\t\t'city' : modal_city,\n\t\t\t'area' : modal_area,\n\t\t},\n\t\tsuccess:function(data)\n\t\t{\n\t\t\tif(data.length)\n\t\t\t{\n\t\t\t\t$('#location-filter-data').show();\n\t\t\t\t$('.loc-internal-search').show();\n\t\t\t\t$('#web-loc-template').show();\n\n\t\t\t\tif(!$('#locationHeader i').hasClass('fa-plus')){\n\t\t\t\t    $(\"#propertyTypeHeader i\").addClass(\"fa-plus\");\n\t\t\t\t    $(\"#propertyTypeHeader\").parent().find(\".h5-contnt\").addClass(\"hidden\");\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t\t$('#location-filter-data').hide();\n\n\t\t\t$('.location-list').html(data);\n\n\t\t} \n\t});\n    text_params();\n});\n// filters changed end\n\n//internal location search start\nfunction searchlocation(queryString,searchClass) {\n\tqueryString = queryString.toLowerCase();\n\tif(queryString == ''){\n\t\t$(\".\"+searchClass).show();\n\t\treturn;\n\t}\n\n\t$(\".\"+searchClass).each(function(index, el) {\n\t\tvar name = $(this).data('name').toLowerCase();\n\t\tif(name.indexOf(queryString) != -1) {\n\t\t\t$(this).show();\n\t\t}\n\t\telse{\n\t\t\t$(this).hide();\t\n\t\t}\n\t});\n}\n//internal location search end\n\n//pagination script start\n$('body').on('click','#pagination_container a:not(.disabled-pagination)',function(e){\n\te.preventDefault();\n\tif($(\"#search-loader\").is(\":visible\"))\n\t\treturn;\n\n\tvar link = $(this).attr('href');\n\ttrigger_zoom_changed = 0;\n\tload_properties_url(link,1);\n});\n//pagination script end\n\n$(document).ready(function(){\n\tif($('#show_loc_filter').val() == 1 && $('#count_location_data').val() > 0)\n\t{\n\t\t$('#location-filter-data').show();\n\t\t$(\"#locationHeader i\").removeClass(\"fa-plus\");\n\t\t$(\".location-filter-list\").removeClass(\"hidden\");\n\t\tif ($('#location_level').val() == 'area')\n\t\t{\n\t\t\t$('#location-area-modal').show();\n\t\t\t$('#location-area-mob').show();\n\t\t}\n\t}\n\telse\n\t{\n\t\t$(\"#propertyTypeHeader i\").removeClass(\"fa-plus\");\n\t\t$(\"#propertyTypeHeader\").parent().find(\".h5-contnt\").removeClass(\"hidden\");\n\t}\n\t\n\n\tif($('#adrs_state').val() != '')\n\t\tfetch_city($('#adrs_state').val());\n\n\tif($('#adrs_city').val() != '')\n\t{\n\t\tvar window_width = $(window).width();\n\t\tif(window_width < 768)\n\t\t\tfetch_area($('#adrs_city').val(),1);\n\t\telse\n\t\t\tfetch_area($('#adrs_city').val());\n\t}\n\n\t//call functions on document ready\n\tread_url();\n\tload_properties('#xy-properties-result');\n\t// fixMap();\n\t// loaderHeight();\n\tmodalSet();\n\t// adjustCss();\n\thideMapView();\n\ttabView();\n\n\t// hide no rentals found messege start\n\tif($(\"#rentalscount\").val() == 0)\n\t{\n\t\t$(\".noresult-search\").show();\n\t\t$('.rentals-found').hide();\n\t}\n\telse\n\t{\n\t\t$(\".noresult-search\").hide();\n\t\t$('.rentals-found').show();\n\t}\n\t// hide no rentals found messege end\n\n    //check if first load screen is map view or not\n  //   if($('#view') .val() == 'map')\n  //   {\n  //   \t$('#location-filter-data').hide();\n  //   \t$('#properties-container-new').removeClass(\"search-results-view\").addClass(\"search-resultmap-view\");\n\t\t// $('.map-view-section').show();\n\t\t// $('.new-search-container').addClass(\"map-new-search\");\n\t\t// $('.new-search-innercontainer').addClass(\"active-mapcont\");\n  //   \t$(\"#view\").val('map');\n  //   \t// initialize_map();\n  //   }\n\n\t$(window).scroll(function(){\n\t\tload_properties('#xy-properties-result');\n\t\t\n\t});\n\n\tfunction setFiltersWidth(){\t\n\t\t//set width of search filters to 20% of parent\n\t\tif($(window).width() >= '991'){\n\t\t\t$('#searchFilters').css({\"width\": (20/100) * $('.mainsearch-wrapper').width() + \"px\" });\t\t\n\t\t}\n\t\telse{\n\t\t\t$('#searchFilters').css({\"width\": 100 + \"%\" });\t\t\t\n\t\t}\n\t}\n\n\tsetFiltersWidth();\n\t\n\t$(window).resize(function(){\n\t\t// console.log('s');\n\t\trecalculate_sticky();\n\t\tload_properties('#xy-properties-result');\n\t\t// var window_width = $(window).width();\n\t\t// if(window_width < 992){\n\t\t// \t$('#location-filter-data').hide();\n\t\t// }\n\t\t// else\n\t\t// \t$('#location-filter-data').show();\n\n\t\t// modalSet();\n\t\t// loaderHeight();\t\n\t\t// fixMap();\n\t\t// \t\n\t\t// hideMapView();\t\n\t\t// tabView();\n\t\t// centerImagebuttons();\n\t\t// //set width of search filters\n\t\t// setFiltersWidth();\n\n\t});\n\t// infinite scroll script end\n\n\t//back button page refresh start\n\t$(window).bind('popstate', function()\n\t{\n\t    var isChrome = /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);\n\t    var isSafari = /Safari/.test(navigator.userAgent) && /Apple Computer/.test(navigator.vendor);\n\n\t    var nua = navigator.userAgent;\n\t    var is_android_default_browser = (nua.indexOf('Mozilla/5.0') > -1 && nua.indexOf('Android ') > -1 && nua.indexOf('AppleWebKit') > -1);\n\n\t    if($(\"body\").hasClass(\"historypushed\") || (!isChrome && !isSafari && !is_android_default_browser))\n\t    {\n      \t\twindow.location.reload();\n\t    }\n\t\t$(\"body\").addClass(\"historypushed\");\n\t});\n\t//back button page refresh ends\n\t\n\t// filters changed start\n\t$('body').on('change',\".search-filter:not('.dpd')\",function()\n\t{\n\t\tvar window_width = $(window).width();\n\t\ttext_params();\n\t});\n\n\t$('#sl2').slider().on('slideStop', function(ev)\n\t{\n\t\tvar window_width = $(window).width();\n\t\ttext_params();\n\t});\n\n\t$('body').on('click','.apply-search-filter',function()\n    {\n    \t$('#locationModal').modal('hide');\n    \t//also check boxes outside the modal\n    \t$('.search-location-modal').each(function(){\n    \t\tvar chk_id = '#search_keyword_'+ $(this).data('id');\n    \t\tif($(this).is(':checked'))\n\t    \t{\n\t\t\t\t$(chk_id).prop('checked', true);\n\t    \t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t$(chk_id).prop('checked', false);\n\t\t\t}\n    \t});\n        text_params();\n    });\n\n\t$('.reset-all').click(function()\n\t{\n\t\t$('.search-filter').removeAttr('checked','checked');\n\t\t$('.location-checkbox-copy').removeAttr('checked','checked');\n\t\tresetSlider();\n\t});\n\n\t$('body').on('change','.location-filter-page',function()\n    {\n\t\tvar window_width = $(window).width();\n    \tvar current_id = $(this).data('id');\n    \tvar model_list_id = '#' + current_id;\n    \tif($(this).is(':checked'))\n    \t{\n\t\t\t$(model_list_id).prop('checked', true);\n    \t}\n\t\telse\n\t\t{\n\t\t\t$(model_list_id).prop('checked', false);\n\t\t}\n\n\t\ttext_params();\n    });\n\n    $('body').on('click','.search-location-city-filter',function()\n    {\n    \tvar city = $(this).html();\n    \tvar state = $('#adrs_state').val();\n    \t$('#adrs_city').val(city);\n    \tvar link = search_controller_url +  \"findarea\";\n    \t$.ajax({\n\t\t\turl: link,\n\t\t\ttype: \"get\",\n\t\t\tdata: { \n\t\t\t\tcity: $('#adrs_city').val(),\n\t\t\t\tstate: state\n\t\t\t},\n\t\t\tsuccess:function(data)\n\t\t\t{\n\t\t\t\tif(data.length > 0)\n\t\t\t\t{\n\t\t\t\t\t$('#location-area-modal').show();\n\t    \t\t\t$('#location-filter-data').html(data);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\t$('#location-area-modal').hide();\n\t    \t\t\t$('#location-filter-data').hide();\n\t\t\t\t}\n\t\t\t\t$('#modify_city').val(city);\n\t\t\t\tfetch_area(city);\n    \t\t\ttext_params();\n\t\t\t} \n\t\t});\n    });\n    \n    //View change script end\n\n\t$('body').on('click','.chkbox a.showmore',function()\n\t{\n\t\t//$(this).find('.more-count').hide();\n\t\tif($(this).hasClass(\"less\"))\n\t\t{\n\t\t\t$(this).find('.more-count').show();\n\t\t\t$(this).parents('.chkbox').children('li:gt(4)').hide();\n\t \t\t$(this).removeClass('less');\n\t \t\t$(this).find('.showmore-text').html('More');\n\t\t}\n\t\telse\n\t\t{\n\t\t\t$(this).find('.more-count').hide();\n\t\t\t$(this).parents('.chkbox').children('li').show();\n\t \t\t$(this).addClass('less');\n\t \t\t$(this).find('.showmore-text').html('Less');\n\t \t\tvar window_height = $(window).height(); \n\t\t\t// var offset_top = $(window).offset().top; \n\t\t\tvar header_height = $('#header').height();\n\t\t\tvar filter_height = $('.side-filters').height();\n\n\t\t\twindow_height - header_height >= filter_height\n\t \t\tif(filter_height + header_height - 1 > window_height){\n\t \t\t\t// alert();\n\t\t\t\t$('.side-filters').css({'top' : ''});\n\t\t\t\t$('.side-filters').css({'bottom' : '0px'});\n\t \t\t}\n\t\t}\n\t\t\n\n\t})\n\t\n\t$('body').on('click','.showmorelocation',function()\n\t{\n\t\tvar window_width = $(window).width();\n\t\tif(window_width < 768)\n\t\t{\n\t\t\t$('.location-list li').show();\n\t\t\tif($(this).hasClass(\"less\"))\n\t\t\t{\n\t\t\t\t$(this).parents('.chkbox').children('li:gt(9)').hide();\n\t\t \t\t$(this).removeClass('less');\n\t\t \t\t$(this).find('.more-count').show();\n\t\t \t\t$(this).find('.showmore-text').html('More');\n\t \t\t}\n\t \t\telse\n \t\t\t{\n \t\t\t\t$(this).find('.more-count').hide();\n\t\t\t\t$(this).addClass('less');\n\t\t \t\t$(this).find('.showmore-text').html('Less');\n \t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\t$('#locationModal').modal('show');\n\t\t}\n\t});\n\t//filters list collapse expend script end\n\n\t// filter click start\n\t$('.filter-mob').click(function()\n    {\n\t\t$('#mobile-filters').modal('show');\n\t\t$(\".side-filters\").show();\n\t});\n\t// filter click end\n\n\tvar nowTemp = new Date();\n    var now = new Date(nowTemp.getFullYear(), nowTemp.getMonth(), nowTemp.getDate(), 0, 0, 0, 0);\n\tvar checkin = $('.dpd1').datepicker({\n\t\tformat: 'dd-mm-yyyy',\n\t    startDate: now,\n\t    autoclose: true,\n\t    orientation: 'top left'\n\t})\n\t.on('changeDate', function(e){\t\n\t\tselStartDate = e.date;\n\t\tvar nextDay = new Date(e.date);\n\t\tnextDay.setDate(nextDay.getDate() + 1);\n\t\t$('.dpd2').datepicker('setStartDate', nextDay);\n\t\t// datechanged();\n\t\tif(checkout.val() == '') checkout.focus();\t\t\t\t\n\n\t\tif(checkout.datepicker('getDate') == 'Invalid Date') {\n\t\t\tvar newDate = new Date(e.date)\n\t\t\tnewDate.setDate(newDate.getDate() + 1);\n\t\t\tcheckout.datepicker('update',newDate);\n\t\t\tcheckout.focus();\t\n\t\t}\t\t\n    });\t    \n\n\n\tvar checkout = $('.dpd2').datepicker({\n\t\tformat: 'dd-mm-yyyy',\n\t    startDate: now,\n\t    autoclose: true,\n\t    orientation: 'top'\n\t})\n\t.on('changeDate', function(e){\n\t\t// datechanged();\t\t\t\t\t\n    });\n\n    // dpd1_mob\n\n\t//open property in new tab in web and in same tab in mobile\n\t$('body').on('click','.property_link',function(){\n\t\tif($('body').width() < 768){\n\t\t\t$(this).attr('target','');\n\t\t}\n\t\telse{\n\t\t\t$(this).attr('target','_blank');\n\t\t}\n\t});\n\n\t$('body').on('click','.book-now-btn',function(e){\n\t\tga('send', 'pageview','book_now_btn_clicked');\n\t});\n\n    centerImagebuttons();\n});\n\n\n// Custom Map Zoom In and Out Button\nfunction ZoomControl(controlDiv, map) {\n\t// Creating divs & styles for custom zoom control\n\tcontrolDiv.style.padding = '5px';\n\n\t// Set CSS for the control wrapper\n\tvar controlWrapper = document.createElement('div');\n\tcontrolWrapper.style.cursor = 'pointer';\n\tcontrolWrapper.style.textAlign = 'center';\n\tcontrolDiv.appendChild(controlWrapper);\n\n\t// Set CSS for the zoomIn\n\tvar zoomInButton = document.createElement('i');\n\tzoomInButton.className = \"fa  fa-plus zoomin-map\";\n\tcontrolWrapper.appendChild(zoomInButton);\n\n\t// Set CSS for the zoomOut\n\tvar zoomOutButton = document.createElement('i');\n\tzoomOutButton.className = \"fa fa-minus zoomout-map\";\n\tcontrolWrapper.appendChild(zoomOutButton);\n\n\t// Setup the click event listener - zoomIn\n\tgoogle.maps.event.addDomListener(zoomInButton, 'click', function() {\n\tmap.gMap.setZoom(map.gMap.getZoom() + 1);\n\t});\n\n\t// Setup the click event listener - zoomOut\n\tgoogle.maps.event.addDomListener(zoomOutButton, 'click', function() {\n\tmap.gMap.setZoom(map.gMap.getZoom() - 1);\n\t});\n}\n\nfunction centerImagebuttons(){\n\tvar divheight = parseInt($('.prop-img-container').css('height'));\n\tvar spanHeight = parseInt($('.prop-img-container .image-slide').css('height'));\n\tvar setHeight = (divheight / 2) - (spanHeight/2);\n\t$('.image-slide').css({ \"top\" : setHeight });\n}\n\n// preview slider navigation\n$('body').on('click','.image-slide',function(e){\n   \te.preventDefault();\n   \te.stopPropagation ? e.stopPropagation() : (e.cancelBubble=true);\n\n    var divid = $(this).attr('id');\n    var id = $(this).attr('data-id');\n    if($('#current-image-slider').val() != id)\n    {\n    \t$(\"#preview-image-number\").val('0');\n    \t$('#current-image-slider').val(id);\n    }\t\n\n    var imageno = $(\"#preview-image-number\").val();\n    var data = $(\".preview-image-json-\"+$(this).data('id')).val();\n    var images = JSON.parse(data);\n\n  \tif(divid =='image-preview-prev' && parseInt(imageno)>0)\n  \t{\n        imageno = parseInt(imageno) - 1;\n        $(\"#preview-image-number\").val(imageno);\n        var url = images[imageno];\n        $(\"#property-image-\"+id).css({\"background-image\":\"url(\"+url+\")\"});\n  \t}\n    else if(divid =='image-preview-prev' && parseInt(imageno)<1)\n    {\n        imageno = images.length - 1;\n        $(\"#preview-image-number\").val(imageno);\n        var url = images[imageno];\n        $(\"#property-image-\"+id).css({\"background-image\":\"url(\"+url+\")\"});\n    }\n    else if(divid =='image-preview-next' && parseInt(imageno)<images.length - 1)\n    {\n        imageno = parseInt(imageno) + 1;\n        $(\"#preview-image-number\").val(imageno);\n        var url = images[imageno];\n        $(\"#property-image-\"+id).css({\"background-image\":\"url(\"+url+\")\"});\n    }\n    else if(divid =='image-preview-next' && parseInt(imageno)==images.length - 1)\n    {\n        imageno = 0;\n        $(\"#preview-image-number\").val(imageno);\n        var url = images[imageno];\n        $(\"#property-image-\"+id).css({\"background-image\":\"url(\"+url+\")\"});\n    }\n});\n\n\n//map initialize start\n// var mapster = window.Mapster || (window.Mapster = {});\nfunction initialize_map(){\n\t//set map options and element\n\tvar options = mapster.MAP_OPTIONS;\n\telement = document.getElementById('map-canvas');\n\n\t//initialise map\n\tmap = mapster.create(element, options);\n\tmap.set_map_size();\n\n\t//create map controls\n\tvar zoomControlDiv = document.createElement('div');\n\tvar zoomControl = new ZoomControl(zoomControlDiv, map);\n\n\tzoomControlDiv.index = 1;\n\tmap.gMap.controls[google.maps.ControlPosition.TOP_LEFT].push(zoomControlDiv);\n\n\t//bind events to map\n\tgoogle.maps.event.addListenerOnce(map.gMap, 'idle', function(elem) {\n\t\tmap_json = JSON.parse($('#map_json').val());\n\t\tadd_pins_to_map(map_json,1);\n\t});\n\n\tgoogle.maps.event.addListener(map.gMap, 'dragend', function(elem) {\n\t\tif($('body').width() < 768) return;\n\n\t\ttext_params(1);\n\t\treturn;\n\t});\n\n\tgoogle.maps.event.addListener(map.gMap, 'zoom_changed', function(elem) {\n\t\tif($('body').width() < 768) return;\n\n\t\tif(trigger_zoom_changed == 0)\n\t\t{\n\t\t\ttrigger_zoom_changed = 1;\n\t\t\treturn;\n\t\t}\n\t\tif(is_same_latlng == 1)\n\t\t{\n\t\t\tis_same_latlng = 0;\n\t\t\treturn;\n\t\t}\n\t\ttext_params(1);\n\t\treturn;\n\t});\n\n\t// change map pins of current hovered property\n\t$('body').on('mouseover','.property-box', function(){\n\t\tvar id = $(this).attr('data-id');\n\t\tvar found = map.findBy(function(marker){\n\t\t\treturn marker.id === id;\n\t\t})\n\t\tmap.fetchmarker(found);\n\t});\n\n\t// make map pins normal after mouse out\n\t$('body').on('mouseout','.property-box', function(){\n\t\tvar id = $(this).attr('data-id');\n\t\tvar found = map.findBy(function(marker){\n\t\t\treturn marker.id === id;\n\t\t})\n\t\tmap.normalmarker(found);\n\t});\n\n\t//when map loads for first time add pins to map\n\tmap_json = JSON.parse($('#map_json').val());\n\tadd_pins_to_map(map_json,1);\n\n}\n//map initialize end\n\n\nfunction centerImagebuttons(){\n\tvar divheight = parseInt($('.prop-img-container').css('height'));\n\tvar spanHeight = parseInt($('.prop-img-container .image-slide').css('height'));\n\tvar setHeight = (divheight / 2) - (spanHeight/2);\n\t$('.image-slide').css({ \"top\" : setHeight });\n}\n\n// preview slider navigation\n$('body').on('click','.image-slide',function(e){\n\t// for vizury\n\tvar pid = $(this).attr('data-id');\n\tvar src = $(this).siblings('.master-img').attr('src');\n\n\taddViewedProperties(pid);\n   \te.preventDefault();\n\timageCarousel(this);\n});\n\nfunction addViewedProperties(pid){\n\t// for vizury, saving recent 3 only \n\tif(!window.viewed_pids){\n\t\twindow.viewed_pids={};\n\t}\n\tif(!window.viewed_pids[pid]){\n\t\twindow.viewed_pids[pid]='viewed';\n\t\tvizuryOnPropertyImageScrolled(pid);\n\t}\n}\n\nfunction imageCarousel(This) {\n\tvar divId = $(This).attr('id');\n\tvar id = $(This).attr('data-id');\n\n\t\n\t//alert(imageNo);\n\tif($('#view').val()!='map'){\n\t\tvar imageNo = $('#property-image-'+id).data('previewimagenumber');\n\t\tvar data = $(\".preview-image-json-\" + $(This).data('id')).val();\n\t}else{\n\t\tvar imageNo = $('#property-image-map-'+id).data('previewimagenumber');\n\t\tvar data = $(\".preview-image-json-map-\" + $(This).data('id')).val();\n\t}\n\t\n\tvar images = JSON.parse(data);\n\t//alert(divId);\n\tif(divId == 'image-preview-prev' || divId == 'image-preview-prev-map') {\n\t\t//alert(\"\");\n\t\tpreviousImage(id, imageNo, images);\n\t} else if(divId == 'image-preview-next' || divId == 'image-preview-next-map') {\n\t\t//alert(\"next\");\n\t\tnextImage(id, imageNo, images);\n\t}\n}\n\nfunction previousImage(id, imageNo, images) {\n\tif(parseInt(imageNo) > 0)\n\t\timageNo = parseInt(imageNo) - 1;\n\telse\n\t\timageNo = images.length - 1;\n\n\tsetTimeout(function(){\n\t\t$('#property-image-'+id).data('previewimagenumber',imageNo);\n\t\t$('#property-image-map-'+id).data('previewimagenumber',imageNo);\n\t\t\n\t\t$(\"#property-image-\" + id).css({\"background-image\": \"url(\" + images[imageNo] + \")\"});\n\t\t$(\"#property-image-map-\" + id).css({\"background-image\": \"url(\" + images[imageNo] + \")\"});\n\t},300)\n\n\t//for slide animation\n\t$(\"#property-image-\" + id).find('img').addClass(\"img-slide-prev\");\n\tsetTimeout(function(){\n\t\t$(\"#property-image-\" + id).find('img').removeClass(\"img-slide-prev\");\n\t},600)\n}\n\nfunction nextImage(id, imageNo, images) {\n\tif(parseInt(imageNo) < images.length - 1) {\n\t\timageNo = parseInt(imageNo) + 1;\n\t} else if(parseInt(imageNo) == images.length - 1) {\n\t\timageNo = 0;\n\t}\n\n\tsetTimeout(function(){\n\t//alert(imageNo);\n\t$('#property-image-'+id).data('previewimagenumber',imageNo);\n\t$('#property-image-map-'+id).data('previewimagenumber',imageNo);\n//alert(images[imageNo]);\n\t$(\"#property-image-\" + id).css({\"background-image\": \"url(\" + images[imageNo] + \")\"});\n\t$(\"#property-image-map-\" + id).css({\"background-image\": \"url(\" + images[imageNo] + \")\"});\n\t},300)\n\n\t//for slide animation\n\t$(\"#property-image-\" + id).find('img').addClass(\"img-slide-next\");\n\tsetTimeout(function(){\n\t\t$(\"#property-image-\" + id).find('img').removeClass(\"img-slide-next\");\n\t},600)\n}\n\n/*! Hammer.JS - v2.0.4 - 2014-09-28\n * http://hammerjs.github.io/\n *\n * Copyright (c) 2014 Jorik Tangelder;\n * Licensed under the MIT license */\n!function(a,b,c,d){\"use strict\";function e(a,b,c){return setTimeout(k(a,c),b)}function f(a,b,c){return Array.isArray(a)?(g(a,c[b],c),!0):!1}function g(a,b,c){var e;if(a)if(a.forEach)a.forEach(b,c);else if(a.length!==d)for(e=0;e<a.length;)b.call(c,a[e],e,a),e++;else for(e in a)a.hasOwnProperty(e)&&b.call(c,a[e],e,a)}function h(a,b,c){for(var e=Object.keys(b),f=0;f<e.length;)(!c||c&&a[e[f]]===d)&&(a[e[f]]=b[e[f]]),f++;return a}function i(a,b){return h(a,b,!0)}function j(a,b,c){var d,e=b.prototype;d=a.prototype=Object.create(e),d.constructor=a,d._super=e,c&&h(d,c)}function k(a,b){return function(){return a.apply(b,arguments)}}function l(a,b){return typeof a==kb?a.apply(b?b[0]||d:d,b):a}function m(a,b){return a===d?b:a}function n(a,b,c){g(r(b),function(b){a.addEventListener(b,c,!1)})}function o(a,b,c){g(r(b),function(b){a.removeEventListener(b,c,!1)})}function p(a,b){for(;a;){if(a==b)return!0;a=a.parentNode}return!1}function q(a,b){return a.indexOf(b)>-1}function r(a){return a.trim().split(/\\s+/g)}function s(a,b,c){if(a.indexOf&&!c)return a.indexOf(b);for(var d=0;d<a.length;){if(c&&a[d][c]==b||!c&&a[d]===b)return d;d++}return-1}function t(a){return Array.prototype.slice.call(a,0)}function u(a,b,c){for(var d=[],e=[],f=0;f<a.length;){var g=b?a[f][b]:a[f];s(e,g)<0&&d.push(a[f]),e[f]=g,f++}return c&&(d=b?d.sort(function(a,c){return a[b]>c[b]}):d.sort()),d}function v(a,b){for(var c,e,f=b[0].toUpperCase()+b.slice(1),g=0;g<ib.length;){if(c=ib[g],e=c?c+f:b,e in a)return e;g++}return d}function w(){return ob++}function x(a){var b=a.ownerDocument;return b.defaultView||b.parentWindow}function y(a,b){var c=this;this.manager=a,this.callback=b,this.element=a.element,this.target=a.options.inputTarget,this.domHandler=function(b){l(a.options.enable,[a])&&c.handler(b)},this.init()}function z(a){var b,c=a.options.inputClass;return new(b=c?c:rb?N:sb?Q:qb?S:M)(a,A)}function A(a,b,c){var d=c.pointers.length,e=c.changedPointers.length,f=b&yb&&d-e===0,g=b&(Ab|Bb)&&d-e===0;c.isFirst=!!f,c.isFinal=!!g,f&&(a.session={}),c.eventType=b,B(a,c),a.emit(\"hammer.input\",c),a.recognize(c),a.session.prevInput=c}function B(a,b){var c=a.session,d=b.pointers,e=d.length;c.firstInput||(c.firstInput=E(b)),e>1&&!c.firstMultiple?c.firstMultiple=E(b):1===e&&(c.firstMultiple=!1);var f=c.firstInput,g=c.firstMultiple,h=g?g.center:f.center,i=b.center=F(d);b.timeStamp=nb(),b.deltaTime=b.timeStamp-f.timeStamp,b.angle=J(h,i),b.distance=I(h,i),C(c,b),b.offsetDirection=H(b.deltaX,b.deltaY),b.scale=g?L(g.pointers,d):1,b.rotation=g?K(g.pointers,d):0,D(c,b);var j=a.element;p(b.srcEvent.target,j)&&(j=b.srcEvent.target),b.target=j}function C(a,b){var c=b.center,d=a.offsetDelta||{},e=a.prevDelta||{},f=a.prevInput||{};(b.eventType===yb||f.eventType===Ab)&&(e=a.prevDelta={x:f.deltaX||0,y:f.deltaY||0},d=a.offsetDelta={x:c.x,y:c.y}),b.deltaX=e.x+(c.x-d.x),b.deltaY=e.y+(c.y-d.y)}function D(a,b){var c,e,f,g,h=a.lastInterval||b,i=b.timeStamp-h.timeStamp;if(b.eventType!=Bb&&(i>xb||h.velocity===d)){var j=h.deltaX-b.deltaX,k=h.deltaY-b.deltaY,l=G(i,j,k);e=l.x,f=l.y,c=mb(l.x)>mb(l.y)?l.x:l.y,g=H(j,k),a.lastInterval=b}else c=h.velocity,e=h.velocityX,f=h.velocityY,g=h.direction;b.velocity=c,b.velocityX=e,b.velocityY=f,b.direction=g}function E(a){for(var b=[],c=0;c<a.pointers.length;)b[c]={clientX:lb(a.pointers[c].clientX),clientY:lb(a.pointers[c].clientY)},c++;return{timeStamp:nb(),pointers:b,center:F(b),deltaX:a.deltaX,deltaY:a.deltaY}}function F(a){var b=a.length;if(1===b)return{x:lb(a[0].clientX),y:lb(a[0].clientY)};for(var c=0,d=0,e=0;b>e;)c+=a[e].clientX,d+=a[e].clientY,e++;return{x:lb(c/b),y:lb(d/b)}}function G(a,b,c){return{x:b/a||0,y:c/a||0}}function H(a,b){return a===b?Cb:mb(a)>=mb(b)?a>0?Db:Eb:b>0?Fb:Gb}function I(a,b,c){c||(c=Kb);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return Math.sqrt(d*d+e*e)}function J(a,b,c){c||(c=Kb);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return 180*Math.atan2(e,d)/Math.PI}function K(a,b){return J(b[1],b[0],Lb)-J(a[1],a[0],Lb)}function L(a,b){return I(b[0],b[1],Lb)/I(a[0],a[1],Lb)}function M(){this.evEl=Nb,this.evWin=Ob,this.allow=!0,this.pressed=!1,y.apply(this,arguments)}function N(){this.evEl=Rb,this.evWin=Sb,y.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function O(){this.evTarget=Ub,this.evWin=Vb,this.started=!1,y.apply(this,arguments)}function P(a,b){var c=t(a.touches),d=t(a.changedTouches);return b&(Ab|Bb)&&(c=u(c.concat(d),\"identifier\",!0)),[c,d]}function Q(){this.evTarget=Xb,this.targetIds={},y.apply(this,arguments)}function R(a,b){var c=t(a.touches),d=this.targetIds;if(b&(yb|zb)&&1===c.length)return d[c[0].identifier]=!0,[c,c];var e,f,g=t(a.changedTouches),h=[],i=this.target;if(f=c.filter(function(a){return p(a.target,i)}),b===yb)for(e=0;e<f.length;)d[f[e].identifier]=!0,e++;for(e=0;e<g.length;)d[g[e].identifier]&&h.push(g[e]),b&(Ab|Bb)&&delete d[g[e].identifier],e++;return h.length?[u(f.concat(h),\"identifier\",!0),h]:void 0}function S(){y.apply(this,arguments);var a=k(this.handler,this);this.touch=new Q(this.manager,a),this.mouse=new M(this.manager,a)}function T(a,b){this.manager=a,this.set(b)}function U(a){if(q(a,bc))return bc;var b=q(a,cc),c=q(a,dc);return b&&c?cc+\" \"+dc:b||c?b?cc:dc:q(a,ac)?ac:_b}function V(a){this.id=w(),this.manager=null,this.options=i(a||{},this.defaults),this.options.enable=m(this.options.enable,!0),this.state=ec,this.simultaneous={},this.requireFail=[]}function W(a){return a&jc?\"cancel\":a&hc?\"end\":a&gc?\"move\":a&fc?\"start\":\"\"}function X(a){return a==Gb?\"down\":a==Fb?\"up\":a==Db?\"left\":a==Eb?\"right\":\"\"}function Y(a,b){var c=b.manager;return c?c.get(a):a}function Z(){V.apply(this,arguments)}function $(){Z.apply(this,arguments),this.pX=null,this.pY=null}function _(){Z.apply(this,arguments)}function ab(){V.apply(this,arguments),this._timer=null,this._input=null}function bb(){Z.apply(this,arguments)}function cb(){Z.apply(this,arguments)}function db(){V.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function eb(a,b){return b=b||{},b.recognizers=m(b.recognizers,eb.defaults.preset),new fb(a,b)}function fb(a,b){b=b||{},this.options=i(b,eb.defaults),this.options.inputTarget=this.options.inputTarget||a,this.handlers={},this.session={},this.recognizers=[],this.element=a,this.input=z(this),this.touchAction=new T(this,this.options.touchAction),gb(this,!0),g(b.recognizers,function(a){var b=this.add(new a[0](a[1]));a[2]&&b.recognizeWith(a[2]),a[3]&&b.requireFailure(a[3])},this)}function gb(a,b){var c=a.element;g(a.options.cssProps,function(a,d){c.style[v(c.style,d)]=b?a:\"\"})}function hb(a,c){var d=b.createEvent(\"Event\");d.initEvent(a,!0,!0),d.gesture=c,c.target.dispatchEvent(d)}var ib=[\"\",\"webkit\",\"moz\",\"MS\",\"ms\",\"o\"],jb=b.createElement(\"div\"),kb=\"function\",lb=Math.round,mb=Math.abs,nb=Date.now,ob=1,pb=/mobile|tablet|ip(ad|hone|od)|android/i,qb=\"ontouchstart\"in a,rb=v(a,\"PointerEvent\")!==d,sb=qb&&pb.test(navigator.userAgent),tb=\"touch\",ub=\"pen\",vb=\"mouse\",wb=\"kinect\",xb=25,yb=1,zb=2,Ab=4,Bb=8,Cb=1,Db=2,Eb=4,Fb=8,Gb=16,Hb=Db|Eb,Ib=Fb|Gb,Jb=Hb|Ib,Kb=[\"x\",\"y\"],Lb=[\"clientX\",\"clientY\"];y.prototype={handler:function(){},init:function(){this.evEl&&n(this.element,this.evEl,this.domHandler),this.evTarget&&n(this.target,this.evTarget,this.domHandler),this.evWin&&n(x(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&o(this.element,this.evEl,this.domHandler),this.evTarget&&o(this.target,this.evTarget,this.domHandler),this.evWin&&o(x(this.element),this.evWin,this.domHandler)}};var Mb={mousedown:yb,mousemove:zb,mouseup:Ab},Nb=\"mousedown\",Ob=\"mousemove mouseup\";j(M,y,{handler:function(a){var b=Mb[a.type];b&yb&&0===a.button&&(this.pressed=!0),b&zb&&1!==a.which&&(b=Ab),this.pressed&&this.allow&&(b&Ab&&(this.pressed=!1),this.callback(this.manager,b,{pointers:[a],changedPointers:[a],pointerType:vb,srcEvent:a}))}});var Pb={pointerdown:yb,pointermove:zb,pointerup:Ab,pointercancel:Bb,pointerout:Bb},Qb={2:tb,3:ub,4:vb,5:wb},Rb=\"pointerdown\",Sb=\"pointermove pointerup pointercancel\";a.MSPointerEvent&&(Rb=\"MSPointerDown\",Sb=\"MSPointerMove MSPointerUp MSPointerCancel\"),j(N,y,{handler:function(a){var b=this.store,c=!1,d=a.type.toLowerCase().replace(\"ms\",\"\"),e=Pb[d],f=Qb[a.pointerType]||a.pointerType,g=f==tb,h=s(b,a.pointerId,\"pointerId\");e&yb&&(0===a.button||g)?0>h&&(b.push(a),h=b.length-1):e&(Ab|Bb)&&(c=!0),0>h||(b[h]=a,this.callback(this.manager,e,{pointers:b,changedPointers:[a],pointerType:f,srcEvent:a}),c&&b.splice(h,1))}});var Tb={touchstart:yb,touchmove:zb,touchend:Ab,touchcancel:Bb},Ub=\"touchstart\",Vb=\"touchstart touchmove touchend touchcancel\";j(O,y,{handler:function(a){var b=Tb[a.type];if(b===yb&&(this.started=!0),this.started){var c=P.call(this,a,b);b&(Ab|Bb)&&c[0].length-c[1].length===0&&(this.started=!1),this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:tb,srcEvent:a})}}});var Wb={touchstart:yb,touchmove:zb,touchend:Ab,touchcancel:Bb},Xb=\"touchstart touchmove touchend touchcancel\";j(Q,y,{handler:function(a){var b=Wb[a.type],c=R.call(this,a,b);c&&this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:tb,srcEvent:a})}}),j(S,y,{handler:function(a,b,c){var d=c.pointerType==tb,e=c.pointerType==vb;if(d)this.mouse.allow=!1;else if(e&&!this.mouse.allow)return;b&(Ab|Bb)&&(this.mouse.allow=!0),this.callback(a,b,c)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Yb=v(jb.style,\"touchAction\"),Zb=Yb!==d,$b=\"compute\",_b=\"auto\",ac=\"manipulation\",bc=\"none\",cc=\"pan-x\",dc=\"pan-y\";T.prototype={set:function(a){a==$b&&(a=this.compute()),Zb&&(this.manager.element.style[Yb]=a),this.actions=a.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var a=[];return g(this.manager.recognizers,function(b){l(b.options.enable,[b])&&(a=a.concat(b.getTouchAction()))}),U(a.join(\" \"))},preventDefaults:function(a){if(!Zb){var b=a.srcEvent,c=a.offsetDirection;if(this.manager.session.prevented)return void b.preventDefault();var d=this.actions,e=q(d,bc),f=q(d,dc),g=q(d,cc);return e||f&&c&Hb||g&&c&Ib?this.preventSrc(b):void 0}},preventSrc:function(a){this.manager.session.prevented=!0,a.preventDefault()}};var ec=1,fc=2,gc=4,hc=8,ic=hc,jc=16,kc=32;V.prototype={defaults:{},set:function(a){return h(this.options,a),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(a){if(f(a,\"recognizeWith\",this))return this;var b=this.simultaneous;return a=Y(a,this),b[a.id]||(b[a.id]=a,a.recognizeWith(this)),this},dropRecognizeWith:function(a){return f(a,\"dropRecognizeWith\",this)?this:(a=Y(a,this),delete this.simultaneous[a.id],this)},requireFailure:function(a){if(f(a,\"requireFailure\",this))return this;var b=this.requireFail;return a=Y(a,this),-1===s(b,a)&&(b.push(a),a.requireFailure(this)),this},dropRequireFailure:function(a){if(f(a,\"dropRequireFailure\",this))return this;a=Y(a,this);var b=s(this.requireFail,a);return b>-1&&this.requireFail.splice(b,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(a){return!!this.simultaneous[a.id]},emit:function(a){function b(b){c.manager.emit(c.options.event+(b?W(d):\"\"),a)}var c=this,d=this.state;hc>d&&b(!0),b(),d>=hc&&b(!0)},tryEmit:function(a){return this.canEmit()?this.emit(a):void(this.state=kc)},canEmit:function(){for(var a=0;a<this.requireFail.length;){if(!(this.requireFail[a].state&(kc|ec)))return!1;a++}return!0},recognize:function(a){var b=h({},a);return l(this.options.enable,[this,b])?(this.state&(ic|jc|kc)&&(this.state=ec),this.state=this.process(b),void(this.state&(fc|gc|hc|jc)&&this.tryEmit(b))):(this.reset(),void(this.state=kc))},process:function(){},getTouchAction:function(){},reset:function(){}},j(Z,V,{defaults:{pointers:1},attrTest:function(a){var b=this.options.pointers;return 0===b||a.pointers.length===b},process:function(a){var b=this.state,c=a.eventType,d=b&(fc|gc),e=this.attrTest(a);return d&&(c&Bb||!e)?b|jc:d||e?c&Ab?b|hc:b&fc?b|gc:fc:kc}}),j($,Z,{defaults:{event:\"pan\",threshold:10,pointers:1,direction:Jb},getTouchAction:function(){var a=this.options.direction,b=[];return a&Hb&&b.push(dc),a&Ib&&b.push(cc),b},directionTest:function(a){var b=this.options,c=!0,d=a.distance,e=a.direction,f=a.deltaX,g=a.deltaY;return e&b.direction||(b.direction&Hb?(e=0===f?Cb:0>f?Db:Eb,c=f!=this.pX,d=Math.abs(a.deltaX)):(e=0===g?Cb:0>g?Fb:Gb,c=g!=this.pY,d=Math.abs(a.deltaY))),a.direction=e,c&&d>b.threshold&&e&b.direction},attrTest:function(a){return Z.prototype.attrTest.call(this,a)&&(this.state&fc||!(this.state&fc)&&this.directionTest(a))},emit:function(a){this.pX=a.deltaX,this.pY=a.deltaY;var b=X(a.direction);b&&this.manager.emit(this.options.event+b,a),this._super.emit.call(this,a)}}),j(_,Z,{defaults:{event:\"pinch\",threshold:0,pointers:2},getTouchAction:function(){return[bc]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.scale-1)>this.options.threshold||this.state&fc)},emit:function(a){if(this._super.emit.call(this,a),1!==a.scale){var b=a.scale<1?\"in\":\"out\";this.manager.emit(this.options.event+b,a)}}}),j(ab,V,{defaults:{event:\"press\",pointers:1,time:500,threshold:5},getTouchAction:function(){return[_b]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime>b.time;if(this._input=a,!d||!c||a.eventType&(Ab|Bb)&&!f)this.reset();else if(a.eventType&yb)this.reset(),this._timer=e(function(){this.state=ic,this.tryEmit()},b.time,this);else if(a.eventType&Ab)return ic;return kc},reset:function(){clearTimeout(this._timer)},emit:function(a){this.state===ic&&(a&&a.eventType&Ab?this.manager.emit(this.options.event+\"up\",a):(this._input.timeStamp=nb(),this.manager.emit(this.options.event,this._input)))}}),j(bb,Z,{defaults:{event:\"rotate\",threshold:0,pointers:2},getTouchAction:function(){return[bc]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.rotation)>this.options.threshold||this.state&fc)}}),j(cb,Z,{defaults:{event:\"swipe\",threshold:10,velocity:.65,direction:Hb|Ib,pointers:1},getTouchAction:function(){return $.prototype.getTouchAction.call(this)},attrTest:function(a){var b,c=this.options.direction;return c&(Hb|Ib)?b=a.velocity:c&Hb?b=a.velocityX:c&Ib&&(b=a.velocityY),this._super.attrTest.call(this,a)&&c&a.direction&&a.distance>this.options.threshold&&mb(b)>this.options.velocity&&a.eventType&Ab},emit:function(a){var b=X(a.direction);b&&this.manager.emit(this.options.event+b,a),this.manager.emit(this.options.event,a)}}),j(db,V,{defaults:{event:\"tap\",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[ac]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime<b.time;if(this.reset(),a.eventType&yb&&0===this.count)return this.failTimeout();if(d&&f&&c){if(a.eventType!=Ab)return this.failTimeout();var g=this.pTime?a.timeStamp-this.pTime<b.interval:!0,h=!this.pCenter||I(this.pCenter,a.center)<b.posThreshold;this.pTime=a.timeStamp,this.pCenter=a.center,h&&g?this.count+=1:this.count=1,this._input=a;var i=this.count%b.taps;if(0===i)return this.hasRequireFailures()?(this._timer=e(function(){this.state=ic,this.tryEmit()},b.interval,this),fc):ic}return kc},failTimeout:function(){return this._timer=e(function(){this.state=kc},this.options.interval,this),kc},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ic&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),eb.VERSION=\"2.0.4\",eb.defaults={domEvents:!1,touchAction:$b,enable:!0,inputTarget:null,inputClass:null,preset:[[bb,{enable:!1}],[_,{enable:!1},[\"rotate\"]],[cb,{direction:Hb}],[$,{direction:Hb},[\"swipe\"]],[db],[db,{event:\"doubletap\",taps:2},[\"tap\"]],[ab]],cssProps:{userSelect:\"none\",touchSelect:\"none\",touchCallout:\"none\",contentZooming:\"none\",userDrag:\"none\",tapHighlightColor:\"rgba(0,0,0,0)\"}};var lc=1,mc=2;fb.prototype={set:function(a){return h(this.options,a),a.touchAction&&this.touchAction.update(),a.inputTarget&&(this.input.destroy(),this.input.target=a.inputTarget,this.input.init()),this},stop:function(a){this.session.stopped=a?mc:lc},recognize:function(a){var b=this.session;if(!b.stopped){this.touchAction.preventDefaults(a);var c,d=this.recognizers,e=b.curRecognizer;(!e||e&&e.state&ic)&&(e=b.curRecognizer=null);for(var f=0;f<d.length;)c=d[f],b.stopped===mc||e&&c!=e&&!c.canRecognizeWith(e)?c.reset():c.recognize(a),!e&&c.state&(fc|gc|hc)&&(e=b.curRecognizer=c),f++}},get:function(a){if(a instanceof V)return a;for(var b=this.recognizers,c=0;c<b.length;c++)if(b[c].options.event==a)return b[c];return null},add:function(a){if(f(a,\"add\",this))return this;var b=this.get(a.options.event);return b&&this.remove(b),this.recognizers.push(a),a.manager=this,this.touchAction.update(),a},remove:function(a){if(f(a,\"remove\",this))return this;var b=this.recognizers;return a=this.get(a),b.splice(s(b,a),1),this.touchAction.update(),this},on:function(a,b){var c=this.handlers;return g(r(a),function(a){c[a]=c[a]||[],c[a].push(b)}),this},off:function(a,b){var c=this.handlers;return g(r(a),function(a){b?c[a].splice(s(c[a],b),1):delete c[a]}),this},emit:function(a,b){this.options.domEvents&&hb(a,b);var c=this.handlers[a]&&this.handlers[a].slice();if(c&&c.length){b.type=a,b.preventDefault=function(){b.srcEvent.preventDefault()};for(var d=0;d<c.length;)c[d](b),d++}},destroy:function(){this.element&&gb(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},h(eb,{INPUT_START:yb,INPUT_MOVE:zb,INPUT_END:Ab,INPUT_CANCEL:Bb,STATE_POSSIBLE:ec,STATE_BEGAN:fc,STATE_CHANGED:gc,STATE_ENDED:hc,STATE_RECOGNIZED:ic,STATE_CANCELLED:jc,STATE_FAILED:kc,DIRECTION_NONE:Cb,DIRECTION_LEFT:Db,DIRECTION_RIGHT:Eb,DIRECTION_UP:Fb,DIRECTION_DOWN:Gb,DIRECTION_HORIZONTAL:Hb,DIRECTION_VERTICAL:Ib,DIRECTION_ALL:Jb,Manager:fb,Input:y,TouchAction:T,TouchInput:Q,MouseInput:M,PointerEventInput:N,TouchMouseInput:S,SingleTouchInput:O,Recognizer:V,AttrRecognizer:Z,Tap:db,Pan:$,Swipe:cb,Pinch:_,Rotate:bb,Press:ab,on:n,off:o,each:g,merge:i,extend:h,inherit:j,bindFn:k,prefixed:v}),typeof define==kb&&define.amd?define(function(){return eb}):\"undefined\"!=typeof module&&module.exports?module.exports=eb:a[c]=eb}(window,document,\"Hammer\");\n\nvar swipeManager = [];\n\nfunction addSwipe() {\n\t$(\".property-image\").each(function (i) {\n\t\tvar This = $(this).find(\".image-slide\");\n\t\tvar swipeElement = new Hammer(this);\n\t\tswipeManager[i] = swipeElement;\n\t\tswipeElement.on(\"swipeleft\", function() {\n\t\t\tvar id = $(This).attr('data-id');\n\t\t\tif($('#current-image-slider').val() != id) {\n\t\t\t\t$(\"#preview-image-number\").val('0');\n\t\t\t\t$('#current-image-slider').val(parseInt(id));\n\t\t\t}\n\t\t\tvar imageNo = $('#property-tile-'+id).data('previewimagenumber');\n\t\t\tvar data = $(\".preview-image-json-\" + $(This).data('id')).val();\n\t\t\tvar images = JSON.parse(data);\n\t\t\tnextImage(id, imageNo, images);\n\t\t});\n\n\t\tswipeElement.on(\"swiperight\", function() {\n\t\t\tvar id = $(This).attr('data-id');\n\t\t\tif($('#current-image-slider').val() != id) {\n\t\t\t\t$(\"#preview-image-number\").val('0');\n\t\t\t\t$('#current-image-slider').val(parseInt(id));\n\t\t\t}\n\t\t\tvar imageNo = $('#property-tile-'+id).data('previewimagenumber');\n\t\t\tvar data = $(\".preview-image-json-\" + $(This).data('id')).val();\n\t\t\tvar images = JSON.parse(data);\n\t\t\tpreviousImage(id, imageNo, images);\n\t\t});\n\t});\n}\n\nfunction removeSwipe() {\n\tfor(var i = 0; i < swipeManager.length; i++) {\n\t\tswipeManager[i].destroy();\n\t}\n\tswipeManager = [];\n}\n\n//google autocomplete input\nfunction interpret_address(autocomplete){\n\tdocument.getElementById('adrs_country').value = '';\n    document.getElementById('adrs_state').value = '';\n    document.getElementById('adrs_city').value = '';\n    document.getElementById('adrs_area').value = '';\n    document.getElementById('searchlat').value = '';\n    document.getElementById('searchlng').value = '';\n\n    var myAddress = {};\n    var place = autocomplete.getPlace();\n    // console.log(place);\n    var add_comp = place.address_components;\n    var add_lat = place.geometry.location;\n\n    var address = new Object;\n\n    var short_name , types;\n    var city_temp = '';\n    for (i = add_comp.length - 1; i >= 0 ; i--)\n    {\n        if(add_comp[i].types[0] == 'country')\n        {\n            address.country = add_comp[i].short_name;\n            document.getElementById('adrs_country').value = address.country; \n            address.lat = add_lat.lat();\n            document.getElementById('searchlat').value = address.lat; \n            address.lng = add_lat.lng();\n            document.getElementById('searchlng').value = address.lng; \n        }\n        if(add_comp[i].types[0] == 'administrative_area_level_1')\n        {\n            address.state = add_comp[i].long_name;\n            document.getElementById('adrs_state').value = address.state; \n        }\n        if(add_comp[i].types[0] == 'locality')\n        {\n            address.city = add_comp[i].long_name;\n            city_temp = address.city;\n            document.getElementById('adrs_city').value = address.city; \n        }\n        if(city_temp=='' && add_comp[i].types[0] == 'administrative_area_level_2')\n        {\n            address.city = add_comp[i].long_name;\n            document.getElementById('adrs_city').value = address.city; \n        }\n        if(add_comp[i].types[0] == 'sublocality_level_1')\n        {\n            address.area = add_comp[i].long_name;\n            document.getElementById('adrs_area').value = address.area; \n        }\n    }\n\n    $('#adrs_location').val($('#search-location').val());\n    $('#adrs_country_name').val('');\n    $('.location-tab-content input').prop('checked', false);\n    location_change_trigger = 1;\n\n    //vizury tracking\n    vizuryTrackingOnSearchPageLoad(true);\n    adElementTrackingAtSearch();\n    text_params(0,0,0,1);\n}\n\nfunction initialize_place_search() \n{\n    var input = document.getElementById('search-location');\n    var options = {\n        types: ['(regions)'],\n    };\n    //console.log(options)\n    var autocomplete = new google.maps.places.Autocomplete(input, options);\n    google.maps.event.addListener(autocomplete, 'place_changed', function() {\n        interpret_address(autocomplete);\n    });\n}\ngoogle.maps.event.addDomListener(window, 'load', initialize_place_search);\n//google autocomplete input\n\n//wishlist menu\n//add a new item to wishlist\nfunction addToWishList(pid){\n\tvar count = $('.wishlist-count').attr('data-count');\n\t$('.wishlist-count').attr('data-count', ++count);\n\t$('.wishlist-count').text(count);\n\tvar json = JSON.parse($('#property-tile-'+pid).attr('data-wishlist'));\n\t\n\tvar source = $(\"#wishlist-ui-template\").html();\n\tvar template = Handlebars.compile(source);\n\tvar obj = {\n\t\t\t\t\t'row' : json\n\t\t\t\t};\t\n\tvar html = template(obj);\n\t$('#wishlist-items').prepend(html);\n\t$('#property-tile-'+pid).find('.icon-wishlist').addClass('active');\t\n}\n\n//remove an item to wishlist\nfunction removeFromWishList(pid){\n\tvar count = $('.wishlist-count').attr('data-count');\n\t$('.wishlist-count').attr('data-count', --count);\n\t$('.wishlist-count').text(count);\n\t$('#wishlist-item-' + pid).parents(\"a\").remove();\n\t//remove heart color of property tile\n\t$('#property-tile-'+pid).find('.icon-wishlist').removeClass('active');\n}\n\nfunction removeAllFromWishList(){\n\tif(!confirm('Are you sure?')) return;\n\n\t$(\"#wishlist-items>a\").remove();\n\tvar count = 0;\n\t$('.wishlist-count').attr('data-count', count);\n\t$('.wishlist-count').text(count);\n\t//remove all hert icons color\n\t$('.property-tile').find('.icon-wishlist').removeClass('active');\n\t//update on\n\tvar request_url = base_url + '/user/clear-wishlist';\n\t$.ajax({\n\t\turl: request_url,\n\t\ttype:\"post\",\n\t\tdata:{\n\t\t},\n\t\tsuccess:function(data){\n\t\t}\n\t});\n\n}\n\n//wishlist \n$('body').on('click', '.icon-wishlist',function(e){\n\te.preventDefault();\n\tvar p_id = $(this).attr('data-id');\n\tvar me =  $(this);\n\t\n\tif($(this).hasClass('active')){\n\t\tvar request_url = base_url + '/user/unfavourite';\n\t\tremoveFromWishList(p_id);\n\t\tvizuryOnWishlistAddRemove(false, p_id);\n\t\tga('send', 'pageview','property_removed_from_wishlist');\n\t}\n\telse{\n\t\tvar request_url = base_url + '/user/favourite';\n\t\tvizuryOnWishlistAddRemove(true, p_id);\n\t\tga('send', 'pageview','property_added_to_wishlist');\n\t}\n\t$.ajax({\n\t\turl: request_url,\n\t\ttype:\"post\",\n\t\tdata:{\n\t\t\t'property' : p_id\n\t\t},\n\t\tsuccess:function(data){\n\t\t\tif (data.success) {\n\t\t\t\taddToWishList(p_id);\n\t\t\t}\n\t\t}\n\t});\n});\n\n//remove item from wishlist\n$(\"body\").on(\"click\",\".icon-remove-pr\",function(e){\n\te.preventDefault();\n\tvar p_id = $(this).data('id');\n\tvar request_url = base_url + '/user/unfavourite';\n\t$.ajax({\n\t\turl: request_url,\n\t\ttype:\"post\",\n\t\tdata:{\n\t\t\t'property' : p_id\n\t\t},\n\t\tsuccess:function(data){\n\t\t\tif(data.success == '1')\n\t\t\t{\n\t\t\t\tremoveFromWishList(p_id);\n\t\t\t\tvizuryOnWishlistAddRemove(false, p_id);\n\t\t\t}\n\t\t}\n\t});\t\n});\n\n\n\ncalculateMoreItem();\nfunction calculateMoreItem(){\n\t$(\".more-item\").each(function(){\n\t    var totalItem = $(this).siblings(\".item-list ul\").find(\"li\").length-4;\n\t\tif(totalItem > 0){\n\t\t\t$(this).text(totalItem + \" \" + \"MORE\");\n\t\t} else{\n\t\t\t$(this).text(\"\");\n\t\t}\n\t});\n}\n\n$('body').on('click', '.more-item',function(){\n\tvar check = $(this).siblings(\".item-list ul\").hasClass('active');\n\t$('.filter-section').find(\".item-list ul\").removeClass('active');\n\tif(!check){\n\t$(this).siblings(\".item-list ul\").addClass(\"active\");\n\t}\n\tvar totalItem = $(this).siblings(\".item-list ul\").find(\"li\").length-4;\n\tvar text = $(this).text();\n\t\n\tif(text == \"LESS\"){\n\t\t$(this).text(totalItem + \" \" + \"MORE\");\n\t} else {\n\t\tcalculateMoreItem();\n\t\t\n\t\t$(this).text(\"LESS\");\n\n\t}\n\n\t$(\"body input:checkbox:not('#coa,#ib')\").each(function() {\n\t\tif($(this).is(':checked'))\n\t\t{\n\t\t\tvar $this = $(this).parent('li');\n\t        $this.insertBefore($this.siblings(':eq(0)'));\n\t    }\n\t});\n\n\n\n\trecalculate_sticky();\n});\n//close location filter on body click\n$('body').click(function(e){\n\tif(!$(e.target).parents('.search-filter-box').length){\n\t\t$('.location-section').removeClass('search-active');\n\t}\n});\n\n//clear selected location\n$('body').on('click', '.clear-all-location',function(){\n\t$('.location-checkbox-copy, .location-checkbox').prop('checked', false);\n\ttext_params();\n});\n\n//show proce buttton\n$('body').on('click', '.show-prices',function(e){\n\te.preventDefault();\n\t$('#show_prices_modal').modal('show');\n});\n\n//show price modal confirm\n$('body').on('click', '#show_prices_proceed', function(){\n\t$('#show_prices_modal').modal('hide');\n\t$('.start-date').trigger('click');\n});\n\n$('body').on('click', '.icon-heart', function(e){\n\te.preventDefault();\n});\n\n$('body').on('click', '#read_more_location_content', function(){\n\t var offset = $('#detailed_location_content').offset().top;\n\t $(window).scrollTop(offset - 100);\n});\n\n$('body').on('click', '.scroll_to_top', function(){\n\t$(window).scrollTop(0);\n});\n\nfunction makeNextUrl(currentUrl,dateUrl){\n\tvar params = {}, queries, temp, i, l;\n\t// Split into key/value pairs\n\tvar httpP=currentUrl.split(\"?\");\n\tqueries = httpP[1].split(\"&\");\n\t// Convert the array of strings into an object\n\tfor ( i = 0, l = queries.length; i < l; i++ ) {\n\t\ttemp = queries[i].split('=');\n\t\tparams[temp[0]] = temp[1];\n\t}\n\tparams[\"checkin\"] = $('#checkin').val();\n\tparams[\"checkout\"] = $('#checkout').val();\n\treturn httpP[0]+ \"?\" + $.param(params);\n}\nfunction makePrevUrl(currentUrl,dateUrl){\n\tvar params = {}, queries, temp, i, l;\n\t// Split into key/value pairs\n\tvar httpP=currentUrl.split(\"?\");\n\tqueries = httpP[1].split(\"&\");\n\t// Convert the array of strings into an object\n\tfor ( i = 0, l = queries.length; i < l; i++ ) {\n\t\ttemp = queries[i].split('=');\n\t\tparams[temp[0]] = temp[1];\n\t}\n\tparams[\"checkin\"] = $('#checkin').val();\n\tparams[\"checkout\"] = $('#checkout').val();\n\treturn httpP[0]+ \"?\" + $.param(params);\n}\n\nvar getUrlParameterShowPrice = function getUrlParameterShowPrice(sParam,showUrl) {\n    var sPageURL = decodeURIComponent(showUrl),\n    \tsParameterName,\n        i;;\n\tvar sURLVariablesfirst = sPageURL.split('?');       \n    var sURLVariables = sURLVariablesfirst[1].split('&');\n    for (i = 0; i < sURLVariables.length; i++) {\n        sParameterName = sURLVariables[i].split('=');\n\n        if (sParameterName[0] === sParam) {\n            return sParameterName[1] === undefined ? true : sParameterName[1];\n        }\n    }\n};\n\nfunction adElementTrackingAtSearch()\n{\n  window.ae_parms_kv =\n  {\n    city_name : $('#adrs_location').val(), // Name of City\n    check_in_date : $('#checkin').val(), // Check In Date\n    check_out_date : $('#checkout').val(), // Check Out Date\n    guests : $('.guests-count').val(), // Numbers of Guests\n    depth : 1\n  };\n\n  adElementTracking();\n}\n\n$('body').on('change',\"[name='guests']\" , function()\n{\n\tvizuryTrackingOnSearchPageLoad(true);\n  \tadElementTrackingAtSearch();\n\n});","var tileCapture = {\n\t\n\tpropertyTileHeight: 400,\n\tviewportHeight: 0,\n\tviewportwidth: 0,\n\tscrollTop: 0,\n\theaderHeight: 60,\n\ttileViewTime: 1.4, //seconds\n\ttileHoverTime: 2, //seconds\n\tviewedTiles: [],\n\tclickedTiles: [],\n\tslidedTiles: [],\n\thoveredTiles: [],\n\ttileOffsetTopPercentage: 12.20,\n\ttileOffsetBottomPercentage: 31.7,\n\n\tsaveUrl: $('#base_url').val() + '/properties/tracktileinteraction',\n\tinitialise: function(){\n\t\tthis.propertyTileHeight = $('.property-tile:first').height() ? $('.property-tile:first').height() : this.propertyTileHeight;\n\t\tthis.headerHeight = this.getheaderHeight();\n\t\tthis.viewportWidth = $('body').width(); \n\t\tthis.viewportHeight = this.getViewportHeight(); \n\t\tthis.scrollTop = $(window).scrollTop();\n\t\tthis.tileViewTime = this.getTileViewTime(); \n\t},\n\tresetArrays: function(){\n\t\tthis.viewedTiles = [];\n\t\tthis.clickedTiles = [];\n\t\tthis.slidedTiles = [];\n\t\tthis.hoveredTiles = [];\n\t},\n\tgetViewportHeight: function(){\n\t\treturn $(window).height() - this.getheaderHeight(); \n\t},\n\tgetheaderHeight: function(){\n\t\tvar bodyWidth = $('body').width();\n\t\tvar headerHeight = 0;\n\t\tif(bodyWidth > 991){\n\t\t\theaderHeight = $('#searchPageNav').outerHeight(); \n\t\t}\n\t\telse if(bodyWidth > 767 && bodyWidth <= 991){\n\t\t\theaderHeight = $('#searchPageNav').outerHeight(); \n\t\t}\n\t\telse{\n\t\t\theaderHeight = $('.header').outerHeight() + ($('#xs-filter-results').length ? $('#xs-filter-results').outerHeight() : 0); \n\t\t}\n\t\treturn headerHeight;\n\t},\n\tgetTileViewTime: function(){\n\t\tvar bodyWidth = $('body').width();\n\t\tvar tileViewTime = 0;\n\t\tif(bodyWidth >= 1600){\n\t\t\ttileViewTime = 1.9; \n\t\t}\n\t\telse if(bodyWidth > 767 && bodyWidth < 1600){\n\t\t\ttileViewTime = 1.4; \n\t\t}\n\t\telse{\n\t\t\ttileViewTime = 1; \n\t\t}\n\t\treturn tileViewTime;\n\t},\n\tgetTilesInView: function(){\n\t\tvar headerHeight = this.getheaderHeight();\n\t\tvar scrollTop = $(window).scrollTop();\n\t\tvar viewportHeight = this.viewportHeight;\n\t\tvar propertyTileHeight = this.propertyTileHeight;\n\t\tvar tileOffsetTop = (this.tileOffsetTopPercentage * propertyTileHeight) / 100;\n\t\tvar tileOffsetBottom = (this.tileOffsetBottomPercentage * propertyTileHeight) / 100;\n\t\tvar properties = [];\n\t\t//loop though each property\n\t\t$(\".property-tile:not('.viewed')\").each(function(){\n\t\t\tvar propertyOffsetTop = $(this).offset().top - headerHeight - scrollTop + tileOffsetTop;\n\t\t\tvar in_view = false;\n\n\t\t\t//check if property tile is in viewport\n\t\t\tif(propertyOffsetTop >= 0 && propertyOffsetTop - tileOffsetTop + propertyTileHeight - tileOffsetBottom <= viewportHeight){\n\t\t\t\tin_view = true;\n\t\t\t\tproperties.push($(this).data('id'));\n\t\t\t}\n\t\t});\n\t\treturn properties;\n\t},\n\tgetCommonValues: function(a, b){\n\t \tvar t;\n\t    if (b.length > a.length) t = b, b = a, a = t; // indexOf to loop over shorter\n\t    return a.filter(function (e) {\n\t        if (b.indexOf(e) !== -1) return true;\n\t    });\n\t},\n\tgetDifference: function(a1, a2){\n\t\tdifference = $.grep(a1,function(x) {return $.inArray(x, a2) < 0});\n\t\treturn difference;\n\t},\n\tupdateViewedTilesList: function(new_viewed_tiles){\n\t\tfor (var i = new_viewed_tiles.length - 1; i >= 0; i--) {\n\t\t\tthis.viewedTiles.push(new_viewed_tiles[i]);\n\t\t\t$('#property-tile-'+new_viewed_tiles[i]).addClass('viewed');\n\t\t\t$('#property-tile-map-'+new_viewed_tiles[i]).addClass('viewed');\n\t\t};\n\n\t\t//save data to DB\n\t\tthis.saveData(new_viewed_tiles, 'view');\t\t\n\t},\n\tcheckInTilesView: function(){\n\t\t//take snapshot of tiles in view\n\t\tvar old_tiles = tileCapture.getTilesInView();\n\t\tif(old_tiles.length){\n\t\t\tsetTimeout(function(){\n\t\t\t\t//take snapshot of tiles in view after given time\n\t\t\t\tvar new_tiles =  tileCapture.getTilesInView();\n\t\t\t\tvar common_tiles = tileCapture.getCommonValues(old_tiles, new_tiles);\n\t\t\t\tif(common_tiles.length){\n\t\t\t\t\t//if same properties exist in master list then omit\n\t\t\t\t\tvar new_viewed_tiles = tileCapture.getDifference(common_tiles, tileCapture.viewedTiles);\n\t\t\t\t\tif(new_viewed_tiles.length){\n\t\t\t\t\t\ttileCapture.updateViewedTilesList(new_viewed_tiles);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, tileCapture.tileViewTime*1000);\n\t\t}\n\t},\n\tupdateClickedTilesList: function(id){\n\t\t$('#property-tile-'+id).addClass('clicked');\n\t\t$('#property-tile-map-'+id).addClass('clicked');\n\t\tthis.clickedTiles.push(id);\n\t\t//save data to DB\n\t\tthis.saveData([id], 'click');\n\t},\n\tupdateSlideTilesList: function(id){\n\t\tif($('#property-tile-'+id).hasClass('slided')) return;\n\t\t$('#property-tile-'+id).addClass('slided');\n\t\t$('#property-tile-map-'+id).addClass('slided');\n\t\tthis.slidedTiles.push(id);\n\t\t//save data to DB\n\t\tthis.saveData([id], 'slide');\n\t},\t\n\tcheckTileHover: function(id){\n\n\t\tvar hoverStart = $('#property-tile-'+id).data('hoverStart');\n\n\t\tif(hoverStart !== undefined){\n\t\t\tvar diff = $.now() - hoverStart;\n\t\t\tif(diff > this.tileHoverTime * 1000){\n\t\t\t\ttileCapture.updateHoverTilesList(id);\n\t\t\t}\n\t\t}\n\t},\n\tupdateHoverTilesList: function(id){\n\t\t$('#property-tile-'+id).addClass('hovered');\n\t\t$('#property-tile-map-'+id).addClass('hovered');\n\t\tthis.hoveredTiles.push(id);\n\n\t\t//save data to DB\n\t\tthis.saveData([id], 'hover');\n\t},\n\tsaveData: function(pids, eventType){\n\t\t//save data to DB\n\t\t$.ajax({\n\t\t\turl: this.saveUrl,\n\t\t\ttype: \"post\",\n\t\t\tdataType: 'json',\n\t\t\tdata: { '_token' : $(\"[name='_token']\").val(), \n\t\t\t\t\t'viewport_width' : this.viewportWidth, \n\t\t\t\t\t'viewport_height' : this.viewportHeight,\n\t\t\t\t\t'pids' : pids, \n\t\t\t\t\t'event': eventType, \n\t\t\t\t},\n\t\t\tsuccess:function(data)\n\t\t\t{\n\n\t\t\t} \n\t\t});\t\t\t\t\n\t}\t\t\n\t\n};\n\n//on window resize\n$(window).resize(function(){\n\ttileCapture.initialise();\n});\n\n//initialise vars\ntileCapture.initialise();\n\ntileCapture.getTilesInView();\n//on window scroll\n\n//scroll with little buffer\n_buffer = null;\n$(window).on('scroll', function ( e ) {\n\tif(!_buffer){\n\t\t_buffer = setTimeout(function () {\t\n\t\t\ttileCapture.checkInTilesView();\n\t\t\t_buffer = null;\n\t\t }, 300);\n\t} \n});\n\n//click event\n$('body').on('click',\".property-tile:not('.clicked')\", function(e){\n\t\tvar pid = $(this).data('id');\n\t\ttileCapture.updateClickedTilesList(pid);\n});\n\n//slider event\n$('body').on('click',\".swiper-button-next,.swiper-button-prev\",function(e){\n\te.stopPropagation();\n\tvar pid = $(this).data('id');\n\tif(!$(this).parents('.property-tile').hasClass('slided')){\n\t\ttileCapture.updateSlideTilesList(pid);\n\t}\n});\n\n\n//mouse enter event\n$('body').on('mouseenter',\".property-tile:not('.hovered')\",function(e){\n\t//add entered timestamp to property tile\n\t$(this).data('hoverStart',$.now());\t\n\t$(this).data('cursorX',e.pageX);\t\n\t$(this).data('cursorActive',0);\t\n});\n\n//mouse leave event\n$('body').on('mouseleave',\".property-tile:not('.hovered')\",function(e){\n\tif($(this).data('cursorActive') == 1){\n\t\ttileCapture.checkTileHover($(this).data('id'));\t\n\t}\n});\n\n\n//mouse move event\n$('body').on('mousemove',\".property-tile:not('.hovered')\",function(e){\n\tif($(this).data('cursorX') != e.pageX){\n\t\t$(this).data('cursorActive',1);\t\n\t}\n\t$(this).data('cursorX',e.pageX);\t\n});\n\n\n\n\n\n\n"]}